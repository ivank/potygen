// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Query Interface Should convert complex sql account-levelisation.upsert.query.sql: account-levelisation.upsert.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "levelisationId",
      "nextPos": 183,
      "pick": Array [],
      "pos": 168,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Unknown",
      },
    },
    Object {
      "name": "start",
      "nextPos": 416,
      "pick": Array [],
      "pos": 410,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "end_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 406,
          "pos": 391,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 399,
              "pos": 391,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 406,
              "pos": 400,
              "tag": "Identifier",
              "value": "end_on",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 665,
          "pos": 663,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 665,
              "pos": 663,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 36,
        "pos": 15,
        "table": Object {
          "nextPos": 36,
          "pos": 15,
          "tag": "Identifier",
          "value": "account_levelisations",
        },
        "tag": "Table",
      },
      "table": "account_levelisations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 229,
        "pos": 221,
        "table": Object {
          "nextPos": 229,
          "pos": 221,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 244,
        "pos": 235,
        "table": Object {
          "nextPos": 244,
          "pos": 235,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 306,
        "pos": 293,
        "table": Object {
          "nextPos": 306,
          "pos": 293,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisations.query.sql: account-levelisations.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 2307,
      "pick": Array [],
      "pos": 2305,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2356,
      "pick": Array [],
      "pos": 2354,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2351,
          "pos": 2317,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2326,
              "pos": 2317,
              "tag": "Identifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 2351,
              "pos": 2327,
              "tag": "Identifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "resolvedPostlev",
      "nextPos": 2382,
      "pick": Array [],
      "pos": 2366,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "resolvedPostlev",
      "nextPos": 2408,
      "pick": Array [],
      "pos": 2392,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Boolean",
      },
    },
    Object {
      "name": "state",
      "nextPos": 2498,
      "pick": Array [],
      "pos": 2492,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "account_levelisation_state",
        "type": "LoadRecord",
      },
    },
    Object {
      "name": "state",
      "nextPos": 2575,
      "pick": Array [],
      "pos": 2569,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2566,
          "pos": 2539,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2560,
              "pos": 2539,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 2566,
              "pos": 2561,
              "tag": "Identifier",
              "value": "state",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "levelisationId",
      "nextPos": 2600,
      "pick": Array [],
      "pos": 2585,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Number",
      },
    },
    Object {
      "name": "levelisationId",
      "nextPos": 2672,
      "pick": Array [],
      "pos": 2657,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "levelisation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2654,
          "pos": 2617,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2638,
              "pos": 2617,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 2654,
              "pos": 2639,
              "tag": "Identifier",
              "value": "levelisation_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 2760,
      "pick": Array [],
      "pos": 2756,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "type": "Number",
        },
        "type": "Array",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 2892,
      "pick": Array [],
      "pos": 2882,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "totalPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortOrder",
      "nextPos": 2924,
      "pick": Array [],
      "pos": 2914,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "DESC",
        "type": "String",
      },
    },
    Object {
      "name": "sortOrder",
      "nextPos": 3039,
      "pick": Array [],
      "pos": 3029,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "ASC",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3120,
      "pick": Array [],
      "pos": 3110,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "vatPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3340,
      "pick": Array [],
      "pos": 3330,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "generationPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3588,
      "pick": Array [],
      "pos": 3578,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "exportPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3820,
      "pick": Array [],
      "pos": 3810,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "generationEnergy",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4064,
      "pick": Array [],
      "pos": 4054,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "exportEnergy",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4292,
      "pick": Array [],
      "pos": 4282,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "cfrFitId",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4510,
      "pick": Array [],
      "pos": 4500,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "state",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4708,
      "pick": Array [],
      "pos": 4698,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "isAccepted",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4928,
      "pick": Array [],
      "pos": 4918,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "error",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 5117,
      "pick": Array [],
      "pos": 5107,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "exportType",
        "type": "String",
      },
    },
    Object {
      "name": "limit",
      "nextPos": 5353,
      "pick": Array [],
      "pos": 5347,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Number",
      },
    },
    Object {
      "name": "offset",
      "nextPos": 5373,
      "pick": Array [],
      "pos": 5366,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Number",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 33,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 30,
              "pos": 9,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 33,
              "pos": 31,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "levelisationId",
      "type": Object {
        "column": "levelisation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 82,
          "pos": 45,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 66,
              "pos": 45,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 82,
              "pos": 67,
              "tag": "Identifier",
              "value": "levelisation_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "accountId",
      "type": Object {
        "column": "account_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 138,
          "pos": 106,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 127,
              "pos": 106,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 138,
              "pos": 128,
              "tag": "Identifier",
              "value": "account_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "installationId",
      "type": Object {
        "column": "installation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 194,
          "pos": 157,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 178,
              "pos": 157,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 194,
              "pos": 179,
              "tag": "Identifier",
              "value": "installation_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "state",
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 245,
          "pos": 218,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 239,
              "pos": 218,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 245,
              "pos": 240,
              "tag": "Identifier",
              "value": "state",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isAccepted",
      "type": Object {
        "column": "is_accepted",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 293,
          "pos": 260,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 281,
              "pos": 260,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 293,
              "pos": 282,
              "tag": "Identifier",
              "value": "is_accepted",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationStartReadOn",
      "type": Object {
        "column": "generation_start_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 359,
          "pos": 313,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 334,
              "pos": 313,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 359,
              "pos": 335,
              "tag": "Identifier",
              "value": "generation_start_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationStartReadValue",
      "type": Object {
        "column": "generation_start_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 439,
          "pos": 390,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 411,
              "pos": 390,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 439,
              "pos": 412,
              "tag": "Identifier",
              "value": "generation_start_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationEndReadOn",
      "type": Object {
        "column": "generation_end_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 517,
          "pos": 473,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 494,
              "pos": 473,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 517,
              "pos": 495,
              "tag": "Identifier",
              "value": "generation_end_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationEndReadValue",
      "type": Object {
        "column": "generation_end_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 593,
          "pos": 546,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 567,
              "pos": 546,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 593,
              "pos": 568,
              "tag": "Identifier",
              "value": "generation_end_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationPercentageSplit",
      "type": Object {
        "column": "generation_percentage_split",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 674,
          "pos": 625,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 646,
              "pos": 625,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 674,
              "pos": 647,
              "tag": "Identifier",
              "value": "generation_percentage_split",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationPayment",
      "type": Object {
        "column": "generation_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 749,
          "pos": 709,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 730,
              "pos": 709,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 749,
              "pos": 731,
              "tag": "Identifier",
              "value": "generation_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationEnergy",
      "type": Object {
        "column": "generation_energy",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 815,
          "pos": 776,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 797,
              "pos": 776,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 815,
              "pos": 798,
              "tag": "Identifier",
              "value": "generation_energy",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportStartReadOn",
      "type": Object {
        "column": "export_start_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 883,
          "pos": 841,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 862,
              "pos": 841,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 883,
              "pos": 863,
              "tag": "Identifier",
              "value": "export_start_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportStartReadValue",
      "type": Object {
        "column": "export_start_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 955,
          "pos": 910,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 931,
              "pos": 910,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 955,
              "pos": 932,
              "tag": "Identifier",
              "value": "export_start_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportEndReadOn",
      "type": Object {
        "column": "export_end_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1025,
          "pos": 985,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1006,
              "pos": 985,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1025,
              "pos": 1007,
              "tag": "Identifier",
              "value": "export_end_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportEndReadValue",
      "type": Object {
        "column": "export_end_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1093,
          "pos": 1050,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1071,
              "pos": 1050,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1093,
              "pos": 1072,
              "tag": "Identifier",
              "value": "export_end_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportPercentageSplit",
      "type": Object {
        "column": "export_percentage_split",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1166,
          "pos": 1121,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1142,
              "pos": 1121,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1166,
              "pos": 1143,
              "tag": "Identifier",
              "value": "export_percentage_split",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportPayment",
      "type": Object {
        "column": "export_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1233,
          "pos": 1197,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1218,
              "pos": 1197,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1233,
              "pos": 1219,
              "tag": "Identifier",
              "value": "export_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportEnergy",
      "type": Object {
        "column": "export_energy",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1291,
          "pos": 1256,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1277,
              "pos": 1256,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1291,
              "pos": 1278,
              "tag": "Identifier",
              "value": "export_energy",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportType",
      "type": Object {
        "column": "export_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1346,
          "pos": 1313,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1334,
              "pos": 1313,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1346,
              "pos": 1335,
              "tag": "Identifier",
              "value": "export_type",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "technologyType",
      "type": Object {
        "column": "technology_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1403,
          "pos": 1366,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1387,
              "pos": 1366,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1403,
              "pos": 1388,
              "tag": "Identifier",
              "value": "technology_type",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "totalPayment",
      "type": Object {
        "column": "total_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1462,
          "pos": 1427,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1448,
              "pos": 1427,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1462,
              "pos": 1449,
              "tag": "Identifier",
              "value": "total_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "vatPayment",
      "type": Object {
        "column": "vat_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1517,
          "pos": 1484,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1505,
              "pos": 1484,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1517,
              "pos": 1506,
              "tag": "Identifier",
              "value": "vat_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationPeriods",
      "type": Object {
        "column": "generation_periods",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1577,
          "pos": 1537,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1558,
              "pos": 1537,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1577,
              "pos": 1559,
              "tag": "Identifier",
              "value": "generation_periods",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportPeriods",
      "type": Object {
        "column": "export_periods",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1640,
          "pos": 1604,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1625,
              "pos": 1604,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1640,
              "pos": 1626,
              "tag": "Identifier",
              "value": "export_periods",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "errorCode",
      "type": Object {
        "available": Array [
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "Number",
            },
            Object {
              "type": "String",
            },
          ],
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "String",
            },
            Object {
              "type": "String",
            },
          ],
        ],
        "index": 2,
        "left": Object {
          "column": "payload",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 1677,
            "pos": 1663,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 1669,
                "pos": 1663,
                "tag": "Identifier",
                "value": "issues",
              },
              Object {
                "nextPos": 1677,
                "pos": 1670,
                "tag": "Identifier",
                "value": "payload",
              },
            ],
          },
          "table": "issues",
          "type": "LoadColumn",
        },
        "right": Object {
          "literal": "code",
          "type": "String",
        },
        "sourceTag": Object {
          "nextPos": 1686,
          "pos": 1663,
          "tag": "BinaryExpression",
          "values": Array [
            Object {
              "nextPos": 1677,
              "pos": 1663,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 1669,
                  "pos": 1663,
                  "tag": "Identifier",
                  "value": "issues",
                },
                Object {
                  "nextPos": 1677,
                  "pos": 1670,
                  "tag": "Identifier",
                  "value": "payload",
                },
              ],
            },
            Object {
              "nextPos": 1680,
              "pos": 1677,
              "tag": "BinaryOperator",
              "value": "->>",
            },
            Object {
              "nextPos": 1686,
              "pos": 1680,
              "tag": "String",
              "value": "code",
            },
          ],
        },
        "type": "LoadOperator",
      },
    },
    Object {
      "name": "errorParams",
      "type": Object {
        "available": Array [
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "Number",
            },
            Object {
              "type": "Json",
            },
          ],
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "String",
            },
            Object {
              "type": "Json",
            },
          ],
        ],
        "index": 2,
        "left": Object {
          "column": "payload",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 1719,
            "pos": 1705,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 1711,
                "pos": 1705,
                "tag": "Identifier",
                "value": "issues",
              },
              Object {
                "nextPos": 1719,
                "pos": 1712,
                "tag": "Identifier",
                "value": "payload",
              },
            ],
          },
          "table": "issues",
          "type": "LoadColumn",
        },
        "right": Object {
          "literal": "params",
          "type": "String",
        },
        "sourceTag": Object {
          "nextPos": 1729,
          "pos": 1705,
          "tag": "BinaryExpression",
          "values": Array [
            Object {
              "nextPos": 1719,
              "pos": 1705,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 1711,
                  "pos": 1705,
                  "tag": "Identifier",
                  "value": "issues",
                },
                Object {
                  "nextPos": 1719,
                  "pos": 1712,
                  "tag": "Identifier",
                  "value": "payload",
                },
              ],
            },
            Object {
              "nextPos": 1721,
              "pos": 1719,
              "tag": "BinaryOperator",
              "value": "->",
            },
            Object {
              "nextPos": 1729,
              "pos": 1721,
              "tag": "String",
              "value": "params",
            },
          ],
        },
        "type": "LoadOperator",
      },
    },
    Object {
      "name": "cfrFitId",
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1784,
          "pos": 1750,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1759,
              "pos": 1750,
              "tag": "Identifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 1784,
              "pos": 1760,
              "tag": "Identifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "resolvedPostlevId",
      "type": Object {
        "column": "resolved_postlev_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1843,
          "pos": 1802,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1823,
              "pos": 1802,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1843,
              "pos": 1824,
              "tag": "Identifier",
              "value": "resolved_postlev_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isBacsPaymentsSent",
      "type": Object {
        "column": "is_bacs_payments_sent",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1913,
          "pos": 1870,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1891,
              "pos": 1870,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1913,
              "pos": 1892,
              "tag": "Identifier",
              "value": "is_bacs_payments_sent",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isChequePaymentsSent",
      "type": Object {
        "column": "is_cheque_payments_sent",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1986,
          "pos": 1941,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1962,
              "pos": 1941,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1986,
              "pos": 1963,
              "tag": "Identifier",
              "value": "is_cheque_payments_sent",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 2040,
        "pos": 2019,
        "table": Object {
          "nextPos": 2040,
          "pos": 2019,
          "tag": "Identifier",
          "value": "account_levelisations",
        },
        "tag": "Table",
      },
      "table": "account_levelisations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "issues",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 2057,
        "pos": 2051,
        "table": Object {
          "nextPos": 2057,
          "pos": 2051,
          "tag": "Identifier",
          "value": "issues",
        },
        "tag": "Table",
      },
      "table": "issues",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 2214,
        "pos": 2205,
        "table": Object {
          "nextPos": 2214,
          "pos": 2205,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisations-bulk-close-accounts.query.sql: account-levelisations-bulk-close-accounts.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "ids",
      "nextPos": 198,
      "pick": Array [],
      "pos": 194,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "type": "Number",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 415,
          "pos": 391,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 412,
              "pos": 391,
              "tag": "Identifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 415,
              "pos": 413,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 15,
        "pos": 7,
        "table": Object {
          "nextPos": 15,
          "pos": 7,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 63,
        "pos": 42,
        "table": Object {
          "nextPos": 63,
          "pos": 42,
          "tag": "Identifier",
          "value": "account_levelisations",
        },
        "tag": "Table",
      },
      "table": "account_levelisations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisations-set-bulk-update.query.sql: account-levelisations-set-bulk-update.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "ids",
      "nextPos": 533,
      "pick": Array [],
      "pos": 529,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "type": "Number",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 577,
          "pos": 575,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 577,
              "pos": 575,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 28,
        "pos": 7,
        "table": Object {
          "nextPos": 28,
          "pos": 7,
          "tag": "Identifier",
          "value": "account_levelisations",
        },
        "tag": "Table",
      },
      "table": "account_levelisations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql accounts.list.query.sql: accounts.list.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 740,
      "pick": Array [],
      "pos": 738,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 855,
      "pick": Array [],
      "pos": 853,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 855,
          "pick": Array [],
          "pos": 853,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 962,
      "pick": Array [],
      "pos": 960,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 962,
          "pick": Array [],
          "pos": 960,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1134,
      "pick": Array [],
      "pos": 1132,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1134,
          "pick": Array [],
          "pos": 1132,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1301,
      "pick": Array [],
      "pos": 1299,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1301,
          "pick": Array [],
          "pos": 1299,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1540,
      "pick": Array [],
      "pos": 1538,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1540,
          "pick": Array [],
          "pos": 1538,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1616,
      "pick": Array [],
      "pos": 1614,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "id",
        "type": "Named",
        "value": Object {
          "type": "String",
        },
      },
    },
    Object {
      "name": "q",
      "nextPos": 1654,
      "pick": Array [],
      "pos": 1652,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "supply_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1649,
          "pos": 1624,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1637,
              "pos": 1624,
              "tag": "Identifier",
              "value": "installations",
            },
            Object {
              "nextPos": 1649,
              "pos": 1638,
              "tag": "Identifier",
              "value": "supply_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1692,
      "pick": Array [],
      "pos": 1690,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "export_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1687,
          "pos": 1662,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1675,
              "pos": 1662,
              "tag": "Identifier",
              "value": "installations",
            },
            Object {
              "nextPos": 1687,
              "pos": 1676,
              "tag": "Identifier",
              "value": "export_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1727,
      "pick": Array [],
      "pos": 1725,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "generator_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1722,
          "pos": 1700,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1709,
              "pos": 1700,
              "tag": "Identifier",
              "value": "customers",
            },
            Object {
              "nextPos": 1722,
              "pos": 1710,
              "tag": "Identifier",
              "value": "generator_id",
            },
          ],
        },
        "table": "customers",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1775,
      "pick": Array [],
      "pos": 1773,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "beneficiary_account_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1770,
          "pos": 1735,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1743,
              "pos": 1735,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 1770,
              "pos": 1744,
              "tag": "Identifier",
              "value": "beneficiary_account_number",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1822,
      "pick": Array [],
      "pos": 1820,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1817,
          "pos": 1783,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1792,
              "pos": 1783,
              "tag": "Identifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 1817,
              "pos": 1793,
              "tag": "Identifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 1914,
      "pick": Array [],
      "pos": 1910,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "type": "Number",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "total",
      "type": Object {
        "type": "Number",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 62,
        "pos": 54,
        "table": Object {
          "nextPos": 62,
          "pos": 54,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 133,
        "pos": 124,
        "table": Object {
          "nextPos": 133,
          "pos": 124,
          "tag": "Identifier",
          "value": "customers",
        },
        "tag": "Table",
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 186,
        "pos": 178,
        "table": Object {
          "nextPos": 186,
          "pos": 178,
          "tag": "Identifier",
          "value": "contacts",
        },
        "tag": "Table",
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 247,
        "pos": 238,
        "table": Object {
          "nextPos": 247,
          "pos": 238,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 300,
        "pos": 291,
        "table": Object {
          "nextPos": 300,
          "pos": 291,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 357,
        "pos": 344,
        "table": Object {
          "nextPos": 357,
          "pos": 344,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_addresses",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 446,
          "pos": 421,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 446,
              "pos": 424,
              "tag": "Identifier",
              "value": "installation_addresses",
            },
          ],
        },
        "nextPos": 446,
        "pos": 411,
        "table": Object {
          "nextPos": 420,
          "pos": 411,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql accounts.query.sql: accounts.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 1194,
      "pick": Array [],
      "pos": 1192,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1317,
      "pick": Array [],
      "pos": 1315,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1317,
          "pick": Array [],
          "pos": 1315,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1497,
      "pick": Array [],
      "pos": 1495,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1497,
          "pick": Array [],
          "pos": 1495,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1672,
      "pick": Array [],
      "pos": 1670,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1672,
          "pick": Array [],
          "pos": 1670,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1919,
      "pick": Array [],
      "pos": 1917,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1919,
          "pick": Array [],
          "pos": 1917,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1999,
      "pick": Array [],
      "pos": 1997,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "id",
        "type": "Named",
        "value": Object {
          "type": "String",
        },
      },
    },
    Object {
      "name": "q",
      "nextPos": 2039,
      "pick": Array [],
      "pos": 2037,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "supply_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2034,
          "pos": 2009,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2022,
              "pos": 2009,
              "tag": "Identifier",
              "value": "installations",
            },
            Object {
              "nextPos": 2034,
              "pos": 2023,
              "tag": "Identifier",
              "value": "supply_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2079,
      "pick": Array [],
      "pos": 2077,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "export_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2074,
          "pos": 2049,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2062,
              "pos": 2049,
              "tag": "Identifier",
              "value": "installations",
            },
            Object {
              "nextPos": 2074,
              "pos": 2063,
              "tag": "Identifier",
              "value": "export_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2129,
      "pick": Array [],
      "pos": 2127,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "beneficiary_account_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2124,
          "pos": 2089,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2097,
              "pos": 2089,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 2124,
              "pos": 2098,
              "tag": "Identifier",
              "value": "beneficiary_account_number",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2178,
      "pick": Array [],
      "pos": 2176,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2173,
          "pos": 2139,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2148,
              "pos": 2139,
              "tag": "Identifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 2173,
              "pos": 2149,
              "tag": "Identifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 2276,
      "pick": Array [],
      "pos": 2272,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "type": "Number",
        },
        "type": "Array",
      },
    },
    Object {
      "name": "limit",
      "nextPos": 2634,
      "pick": Array [],
      "pos": 2628,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Number",
      },
    },
    Object {
      "name": "offset",
      "nextPos": 2654,
      "pick": Array [],
      "pos": 2647,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Number",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 50,
          "pos": 39,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 47,
              "pos": 39,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 50,
              "pos": 48,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "state",
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 70,
          "pos": 56,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 64,
              "pos": 56,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 70,
              "pos": 65,
              "tag": "Identifier",
              "value": "state",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "startOn",
      "type": Object {
        "column": "start_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 93,
          "pos": 76,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 84,
              "pos": 76,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 93,
              "pos": 85,
              "tag": "Identifier",
              "value": "start_on",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "firstName",
      "type": Object {
        "column": "first_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 131,
          "pos": 112,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 120,
              "pos": 112,
              "tag": "Identifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 131,
              "pos": 121,
              "tag": "Identifier",
              "value": "first_name",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "lastName",
      "type": Object {
        "column": "last_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 170,
          "pos": 152,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 160,
              "pos": 152,
              "tag": "Identifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 170,
              "pos": 161,
              "tag": "Identifier",
              "value": "last_name",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "email",
      "type": Object {
        "column": "email",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 204,
          "pos": 190,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 198,
              "pos": 190,
              "tag": "Identifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 204,
              "pos": 199,
              "tag": "Identifier",
              "value": "email",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "address",
      "type": Object {
        "args": Array [
          Object {
            "literal": " ",
            "type": "String",
          },
          Object {
            "column": "address_line_1",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 275,
              "pos": 238,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 260,
                  "pos": 238,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 275,
                  "pos": 261,
                  "tag": "Identifier",
                  "value": "address_line_1",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
          Object {
            "column": "address_line_2",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 320,
              "pos": 283,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 305,
                  "pos": 283,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 320,
                  "pos": 306,
                  "tag": "Identifier",
                  "value": "address_line_2",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
          Object {
            "column": "city",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 355,
              "pos": 328,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 350,
                  "pos": 328,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 355,
                  "pos": 351,
                  "tag": "Identifier",
                  "value": "city",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
          Object {
            "column": "postcode",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 394,
              "pos": 363,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 385,
                  "pos": 363,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 394,
                  "pos": 386,
                  "tag": "Identifier",
                  "value": "postcode",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
        ],
        "name": "concat_ws",
        "sourceTag": Object {
          "nextPos": 400,
          "pos": 210,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 219,
              "pos": 210,
              "tag": "Identifier",
              "value": "CONCAT_WS",
            },
            Object {
              "nextPos": 230,
              "pos": 227,
              "tag": "String",
              "value": " ",
            },
            Object {
              "nextPos": 275,
              "pos": 238,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 260,
                  "pos": 238,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 275,
                  "pos": 261,
                  "tag": "Identifier",
                  "value": "address_line_1",
                },
              ],
            },
            Object {
              "nextPos": 320,
              "pos": 283,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 305,
                  "pos": 283,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 320,
                  "pos": 306,
                  "tag": "Identifier",
                  "value": "address_line_2",
                },
              ],
            },
            Object {
              "nextPos": 355,
              "pos": 328,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 350,
                  "pos": 328,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 355,
                  "pos": 351,
                  "tag": "Identifier",
                  "value": "city",
                },
              ],
            },
            Object {
              "nextPos": 394,
              "pos": 363,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 385,
                  "pos": 363,
                  "tag": "Identifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 394,
                  "pos": 386,
                  "tag": "Identifier",
                  "value": "postcode",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "fitIds",
      "type": Object {
        "items": Object {
          "column": "scheme_account_reference",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 463,
            "pos": 429,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 438,
                "pos": 429,
                "tag": "Identifier",
                "value": "contracts",
              },
              Object {
                "nextPos": 463,
                "pos": 439,
                "tag": "Identifier",
                "value": "scheme_account_reference",
              },
            ],
          },
          "table": "contracts",
          "type": "LoadColumn",
        },
        "type": "ToArray",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 492,
        "pos": 484,
        "table": Object {
          "nextPos": 492,
          "pos": 484,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 567,
        "pos": 558,
        "table": Object {
          "nextPos": 567,
          "pos": 558,
          "tag": "Identifier",
          "value": "customers",
        },
        "tag": "Table",
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 622,
        "pos": 614,
        "table": Object {
          "nextPos": 622,
          "pos": 614,
          "tag": "Identifier",
          "value": "contacts",
        },
        "tag": "Table",
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 685,
        "pos": 676,
        "table": Object {
          "nextPos": 685,
          "pos": 676,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 740,
        "pos": 731,
        "table": Object {
          "nextPos": 740,
          "pos": 731,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 799,
        "pos": 786,
        "table": Object {
          "nextPos": 799,
          "pos": 786,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_addresses",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 890,
          "pos": 865,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 890,
              "pos": 868,
              "tag": "Identifier",
              "value": "installation_addresses",
            },
          ],
        },
        "nextPos": 890,
        "pos": 855,
        "table": Object {
          "nextPos": 864,
          "pos": 855,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql accounts.sql: accounts.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 20,
        "pos": 12,
        "table": Object {
          "nextPos": 20,
          "pos": 12,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 289,
        "pos": 280,
        "table": Object {
          "nextPos": 289,
          "pos": 280,
          "tag": "Identifier",
          "value": "customers",
        },
        "tag": "Table",
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ca",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2457,
          "pos": 2455,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2457,
              "pos": 2455,
              "tag": "Identifier",
              "value": "ca",
            },
          ],
        },
        "nextPos": 2457,
        "pos": 2435,
        "schema": Object {
          "nextPos": 2438,
          "pos": 2435,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2454,
          "pos": 2439,
          "tag": "Identifier",
          "value": "CustomerAccount",
        },
        "tag": "Table",
      },
      "table": "CustomerAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2482,
          "pos": 2481,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2482,
              "pos": 2481,
              "tag": "Identifier",
              "value": "c",
            },
          ],
        },
        "nextPos": 2482,
        "pos": 2468,
        "schema": Object {
          "nextPos": 2471,
          "pos": 2468,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2480,
          "pos": 2472,
          "tag": "Identifier",
          "value": "Customer",
        },
        "tag": "Table",
      },
      "table": "Customer",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "fa",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2546,
          "pos": 2544,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2546,
              "pos": 2544,
              "tag": "Identifier",
              "value": "fa",
            },
          ],
        },
        "nextPos": 2546,
        "pos": 2529,
        "schema": Object {
          "nextPos": 2532,
          "pos": 2529,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2543,
          "pos": 2533,
          "tag": "Identifier",
          "value": "FiTAccount",
        },
        "tag": "Table",
      },
      "table": "FiTAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ga",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2622,
          "pos": 2620,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2622,
              "pos": 2620,
              "tag": "Identifier",
              "value": "ga",
            },
          ],
        },
        "nextPos": 2622,
        "pos": 2598,
        "schema": Object {
          "nextPos": 2601,
          "pos": 2598,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2619,
          "pos": 2602,
          "tag": "Identifier",
          "value": "GenerationAccount",
        },
        "tag": "Table",
      },
      "table": "GenerationAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gai",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2711,
          "pos": 2708,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2711,
              "pos": 2708,
              "tag": "Identifier",
              "value": "gai",
            },
          ],
        },
        "nextPos": 2711,
        "pos": 2674,
        "schema": Object {
          "nextPos": 2677,
          "pos": 2674,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2707,
          "pos": 2678,
          "tag": "Identifier",
          "value": "GenerationAccountInstallation",
        },
        "tag": "Table",
      },
      "table": "GenerationAccountInstallation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2802,
          "pos": 2800,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2802,
              "pos": 2800,
              "tag": "Identifier",
              "value": "im",
            },
          ],
        },
        "nextPos": 2802,
        "pos": 2778,
        "schema": Object {
          "nextPos": 2781,
          "pos": 2778,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2799,
          "pos": 2782,
          "tag": "Identifier",
          "value": "InstallationMeter",
        },
        "tag": "Table",
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ba",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2877,
          "pos": 2875,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2877,
              "pos": 2875,
              "tag": "Identifier",
              "value": "ba",
            },
          ],
        },
        "nextPos": 2877,
        "pos": 2859,
        "schema": Object {
          "nextPos": 2862,
          "pos": 2859,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2874,
          "pos": 2863,
          "tag": "Identifier",
          "value": "BankAccount",
        },
        "tag": "Table",
      },
      "table": "BankAccount",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql bacs.query.sql: bacs.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "quarter",
      "nextPos": 619,
      "pick": Array [],
      "pos": 611,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "levelisation_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 608,
          "pos": 584,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 585,
              "pos": 584,
              "tag": "Identifier",
              "value": "p",
            },
            Object {
              "nextPos": 608,
              "pos": 586,
              "tag": "Identifier",
              "value": "levelisation_reference",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "perPage",
      "nextPos": 634,
      "pick": Array [],
      "pos": 626,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
    Object {
      "name": "offset",
      "nextPos": 649,
      "pick": Array [],
      "pos": 642,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "fitId",
      "type": Object {
        "column": "fit_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 24,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 10,
              "pos": 9,
              "tag": "Identifier",
              "value": "p",
            },
            Object {
              "nextPos": 24,
              "pos": 11,
              "tag": "Identifier",
              "value": "fit_reference",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "name",
      "type": Object {
        "column": "beneficiary_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 54,
          "pos": 36,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 37,
              "pos": 36,
              "tag": "Identifier",
              "value": "a",
            },
            Object {
              "nextPos": 54,
              "pos": 38,
              "tag": "Identifier",
              "value": "beneficiary_name",
            },
          ],
        },
        "table": "a",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "amount",
      "type": Object {
        "column": "amount",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 73,
          "pos": 65,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 66,
              "pos": 65,
              "tag": "Identifier",
              "value": "p",
            },
            Object {
              "nextPos": 73,
              "pos": 67,
              "tag": "Identifier",
              "value": "amount",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "quarter",
      "type": Object {
        "column": "levelisation_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 110,
          "pos": 86,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 87,
              "pos": 86,
              "tag": "Identifier",
              "value": "p",
            },
            Object {
              "nextPos": 110,
              "pos": 88,
              "tag": "Identifier",
              "value": "levelisation_reference",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "bankDetails",
      "type": Object {
        "args": Array [
          Object {
            "column": "beneficiary_sort_code",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 154,
              "pos": 131,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 132,
                  "pos": 131,
                  "tag": "Identifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 154,
                  "pos": 133,
                  "tag": "Identifier",
                  "value": "beneficiary_sort_code",
                },
              ],
            },
            "table": "a",
            "type": "LoadColumn",
          },
          Object {
            "column": "beneficiary_account_number",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 184,
              "pos": 156,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 157,
                  "pos": 156,
                  "tag": "Identifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 184,
                  "pos": 158,
                  "tag": "Identifier",
                  "value": "beneficiary_account_number",
                },
              ],
            },
            "table": "a",
            "type": "LoadColumn",
          },
        ],
        "name": "concat",
        "sourceTag": Object {
          "nextPos": 185,
          "pos": 124,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 130,
              "pos": 124,
              "tag": "Identifier",
              "value": "CONCAT",
            },
            Object {
              "nextPos": 154,
              "pos": 131,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 132,
                  "pos": 131,
                  "tag": "Identifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 154,
                  "pos": 133,
                  "tag": "Identifier",
                  "value": "beneficiary_sort_code",
                },
              ],
            },
            Object {
              "nextPos": 184,
              "pos": 156,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 157,
                  "pos": 156,
                  "tag": "Identifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 184,
                  "pos": 158,
                  "tag": "Identifier",
                  "value": "beneficiary_account_number",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "addressLine1",
      "type": Object {
        "column": "address_line_1",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 223,
          "pos": 206,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 208,
              "pos": 206,
              "tag": "Identifier",
              "value": "a2",
            },
            Object {
              "nextPos": 223,
              "pos": 209,
              "tag": "Identifier",
              "value": "address_line_1",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "addressLine2",
      "type": Object {
        "column": "address_line_2",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 259,
          "pos": 242,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 244,
              "pos": 242,
              "tag": "Identifier",
              "value": "a2",
            },
            Object {
              "nextPos": 259,
              "pos": 245,
              "tag": "Identifier",
              "value": "address_line_2",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "addressLine3",
      "type": Object {
        "column": "address_line_3",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 295,
          "pos": 278,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 280,
              "pos": 278,
              "tag": "Identifier",
              "value": "a2",
            },
            Object {
              "nextPos": 295,
              "pos": 281,
              "tag": "Identifier",
              "value": "address_line_3",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "postcode",
      "type": Object {
        "column": "postcode",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 325,
          "pos": 314,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 316,
              "pos": 314,
              "tag": "Identifier",
              "value": "a2",
            },
            Object {
              "nextPos": 325,
              "pos": 317,
              "tag": "Identifier",
              "value": "postcode",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "p",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 352,
          "pos": 351,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 352,
              "pos": 351,
              "tag": "Identifier",
              "value": "p",
            },
          ],
        },
        "nextPos": 352,
        "pos": 342,
        "table": Object {
          "nextPos": 350,
          "pos": 342,
          "tag": "Identifier",
          "value": "payments",
        },
        "tag": "Table",
      },
      "table": "payments",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "a",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 373,
          "pos": 372,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 373,
              "pos": 372,
              "tag": "Identifier",
              "value": "a",
            },
          ],
        },
        "nextPos": 373,
        "pos": 363,
        "table": Object {
          "nextPos": 371,
          "pos": 363,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c2",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 419,
          "pos": 417,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 419,
              "pos": 417,
              "tag": "Identifier",
              "value": "c2",
            },
          ],
        },
        "nextPos": 419,
        "pos": 407,
        "table": Object {
          "nextPos": 416,
          "pos": 407,
          "tag": "Identifier",
          "value": "customers",
        },
        "tag": "Table",
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c3",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 466,
          "pos": 464,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 466,
              "pos": 464,
              "tag": "Identifier",
              "value": "c3",
            },
          ],
        },
        "nextPos": 466,
        "pos": 455,
        "table": Object {
          "nextPos": 463,
          "pos": 455,
          "tag": "Identifier",
          "value": "contacts",
        },
        "tag": "Table",
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "a2",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 522,
          "pos": 520,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 522,
              "pos": 520,
              "tag": "Identifier",
              "value": "a2",
            },
          ],
        },
        "nextPos": 522,
        "pos": 510,
        "table": Object {
          "nextPos": 519,
          "pos": 510,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql contracts.sql: contracts.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 21,
        "pos": 12,
        "table": Object {
          "nextPos": 21,
          "pos": 12,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 398,
        "pos": 390,
        "table": Object {
          "nextPos": 398,
          "pos": 390,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 493,
        "pos": 485,
        "table": Object {
          "nextPos": 493,
          "pos": 485,
          "tag": "Identifier",
          "value": "contacts",
        },
        "tag": "Table",
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 591,
        "pos": 578,
        "table": Object {
          "nextPos": 591,
          "pos": 578,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 832,
          "pos": 830,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 832,
              "pos": 830,
              "tag": "Identifier",
              "value": "im",
            },
          ],
        },
        "nextPos": 832,
        "pos": 808,
        "schema": Object {
          "nextPos": 811,
          "pos": 808,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 829,
          "pos": 812,
          "tag": "Identifier",
          "value": "InstallationMeter",
        },
        "tag": "Table",
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 853,
          "pos": 852,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 853,
              "pos": 852,
              "tag": "Identifier",
              "value": "m",
            },
          ],
        },
        "nextPos": 853,
        "pos": 842,
        "schema": Object {
          "nextPos": 845,
          "pos": 842,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 851,
          "pos": 846,
          "tag": "Identifier",
          "value": "Meter",
        },
        "tag": "Table",
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 909,
          "pos": 907,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 909,
              "pos": 907,
              "tag": "Identifier",
              "value": "mt",
            },
          ],
        },
        "nextPos": 909,
        "pos": 893,
        "schema": Object {
          "nextPos": 896,
          "pos": 893,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 906,
          "pos": 897,
          "tag": "Identifier",
          "value": "MeterType",
        },
        "tag": "Table",
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 964,
        "pos": 957,
        "table": Object {
          "nextPos": 964,
          "pos": 957,
          "tag": "Identifier",
          "value": "tariffs",
        },
        "tag": "Table",
      },
      "table": "tariffs",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 1317,
        "pos": 1310,
        "table": Object {
          "nextPos": 1317,
          "pos": 1310,
          "tag": "Identifier",
          "value": "tariffs",
        },
        "tag": "Table",
      },
      "table": "tariffs",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1639,
          "pos": 1637,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1639,
              "pos": 1637,
              "tag": "Identifier",
              "value": "im",
            },
          ],
        },
        "nextPos": 1639,
        "pos": 1615,
        "schema": Object {
          "nextPos": 1618,
          "pos": 1615,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1636,
          "pos": 1619,
          "tag": "Identifier",
          "value": "InstallationMeter",
        },
        "tag": "Table",
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1660,
          "pos": 1659,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1660,
              "pos": 1659,
              "tag": "Identifier",
              "value": "m",
            },
          ],
        },
        "nextPos": 1660,
        "pos": 1649,
        "schema": Object {
          "nextPos": 1652,
          "pos": 1649,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1658,
          "pos": 1653,
          "tag": "Identifier",
          "value": "Meter",
        },
        "tag": "Table",
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1716,
          "pos": 1714,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1716,
              "pos": 1714,
              "tag": "Identifier",
              "value": "mt",
            },
          ],
        },
        "nextPos": 1716,
        "pos": 1700,
        "schema": Object {
          "nextPos": 1703,
          "pos": 1700,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1713,
          "pos": 1704,
          "tag": "Identifier",
          "value": "MeterType",
        },
        "tag": "Table",
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2166,
          "pos": 2164,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2166,
              "pos": 2164,
              "tag": "Identifier",
              "value": "im",
            },
          ],
        },
        "nextPos": 2166,
        "pos": 2142,
        "schema": Object {
          "nextPos": 2145,
          "pos": 2142,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2163,
          "pos": 2146,
          "tag": "Identifier",
          "value": "InstallationMeter",
        },
        "tag": "Table",
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2187,
          "pos": 2186,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2187,
              "pos": 2186,
              "tag": "Identifier",
              "value": "m",
            },
          ],
        },
        "nextPos": 2187,
        "pos": 2176,
        "schema": Object {
          "nextPos": 2179,
          "pos": 2176,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2185,
          "pos": 2180,
          "tag": "Identifier",
          "value": "Meter",
        },
        "tag": "Table",
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2243,
          "pos": 2241,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2243,
              "pos": 2241,
              "tag": "Identifier",
              "value": "mt",
            },
          ],
        },
        "nextPos": 2243,
        "pos": 2227,
        "schema": Object {
          "nextPos": 2230,
          "pos": 2227,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2240,
          "pos": 2231,
          "tag": "Identifier",
          "value": "MeterType",
        },
        "tag": "Table",
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gai",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2904,
          "pos": 2901,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2904,
              "pos": 2901,
              "tag": "Identifier",
              "value": "gai",
            },
          ],
        },
        "nextPos": 2904,
        "pos": 2867,
        "schema": Object {
          "nextPos": 2870,
          "pos": 2867,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2900,
          "pos": 2871,
          "tag": "Identifier",
          "value": "GenerationAccountInstallation",
        },
        "tag": "Table",
      },
      "table": "GenerationAccountInstallation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ga",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2934,
          "pos": 2932,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2934,
              "pos": 2932,
              "tag": "Identifier",
              "value": "ga",
            },
          ],
        },
        "nextPos": 2934,
        "pos": 2910,
        "schema": Object {
          "nextPos": 2913,
          "pos": 2910,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2931,
          "pos": 2914,
          "tag": "Identifier",
          "value": "GenerationAccount",
        },
        "tag": "Table",
      },
      "table": "GenerationAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "i",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3014,
          "pos": 3013,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3014,
              "pos": 3013,
              "tag": "Identifier",
              "value": "i",
            },
          ],
        },
        "nextPos": 3014,
        "pos": 2996,
        "schema": Object {
          "nextPos": 2999,
          "pos": 2996,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3012,
          "pos": 3000,
          "tag": "Identifier",
          "value": "Installation",
        },
        "tag": "Table",
      },
      "table": "Installation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ca",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3221,
          "pos": 3219,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3221,
              "pos": 3219,
              "tag": "Identifier",
              "value": "ca",
            },
          ],
        },
        "nextPos": 3221,
        "pos": 3199,
        "schema": Object {
          "nextPos": 3202,
          "pos": 3199,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3218,
          "pos": 3203,
          "tag": "Identifier",
          "value": "CustomerAccount",
        },
        "tag": "Table",
      },
      "table": "CustomerAccount",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql delete-accounts.query.sql: delete-accounts.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "type",
      "nextPos": 256,
      "pick": Array [],
      "pos": 251,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 248,
          "pos": 227,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 236,
              "pos": 227,
              "tag": "Identifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 248,
              "pos": 237,
              "tag": "Identifier",
              "value": "scheme_type",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "state",
      "nextPos": 290,
      "pick": Array [],
      "pos": 284,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 281,
          "pos": 267,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 275,
              "pos": 267,
              "tag": "Identifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 281,
              "pos": 276,
              "tag": "Identifier",
              "value": "state",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 305,
          "pos": 303,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 305,
              "pos": 303,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "sourceSystemId",
      "type": Object {
        "column": "source_system_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 325,
          "pos": 309,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 325,
              "pos": 309,
              "tag": "Identifier",
              "value": "source_system_id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "customerId",
      "type": Object {
        "column": "customer_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 360,
          "pos": 349,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 360,
              "pos": 349,
              "tag": "Identifier",
              "value": "customer_id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 20,
        "pos": 12,
        "table": Object {
          "nextPos": 20,
          "pos": 12,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": false,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 73,
        "pos": 64,
        "table": Object {
          "nextPos": 73,
          "pos": 64,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": false,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 90,
        "pos": 83,
        "table": Object {
          "nextPos": 90,
          "pos": 83,
          "tag": "Identifier",
          "value": "tariffs",
        },
        "tag": "Table",
      },
      "table": "tariffs",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql generation-read-data.query.sql: generation-read-data.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "installationId",
      "nextPos": 220,
      "pick": Array [],
      "pos": 205,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "installation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 202,
          "pos": 167,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 186,
              "pos": 167,
              "tag": "Identifier",
              "value": "installation_meters",
            },
            Object {
              "nextPos": 202,
              "pos": 187,
              "tag": "Identifier",
              "value": "installation_id",
            },
          ],
        },
        "table": "installation_meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportDateOn",
      "nextPos": 442,
      "pick": Array [],
      "pos": 429,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Date",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "dateOn",
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 28,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 20,
              "pos": 9,
              "tag": "Identifier",
              "value": "meter_reads",
            },
            Object {
              "nextPos": 28,
              "pos": 21,
              "tag": "Identifier",
              "value": "date_on",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "type": Object {
        "column": "value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 61,
          "pos": 44,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 55,
              "pos": 44,
              "tag": "Identifier",
              "value": "meter_reads",
            },
            Object {
              "nextPos": 61,
              "pos": 56,
              "tag": "Identifier",
              "value": "value",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "meter_reads",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 78,
        "pos": 67,
        "table": Object {
          "nextPos": 78,
          "pos": 67,
          "tag": "Identifier",
          "value": "meter_reads",
        },
        "tag": "Table",
      },
      "table": "meter_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_meters",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 103,
        "pos": 84,
        "table": Object {
          "nextPos": 103,
          "pos": 84,
          "tag": "Identifier",
          "value": "installation_meters",
        },
        "tag": "Table",
      },
      "table": "installation_meters",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql installation-meter-update.query.sql: installation-meter-update.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "removalDate",
      "nextPos": 52,
      "pick": Array [],
      "pos": 40,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Unknown",
      },
    },
    Object {
      "name": "meterId",
      "nextPos": 97,
      "pick": Array [],
      "pos": 89,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 86,
          "pos": 78,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 86,
              "pos": 78,
              "tag": "Identifier",
              "value": "meter_id",
            },
          ],
        },
        "table": "installation_meters",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "installation_meters",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 26,
        "pos": 7,
        "table": Object {
          "nextPos": 26,
          "pos": 7,
          "tag": "Identifier",
          "value": "installation_meters",
        },
        "tag": "Table",
      },
      "table": "installation_meters",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql installations.sql: installations.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 25,
        "pos": 12,
        "table": Object {
          "nextPos": 25,
          "pos": 12,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 691,
        "pos": 682,
        "table": Object {
          "nextPos": 691,
          "pos": 682,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ivi",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1458,
          "pos": 1455,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1458,
              "pos": 1455,
              "tag": "Identifier",
              "value": "ivi",
            },
          ],
        },
        "nextPos": 1458,
        "pos": 1422,
        "schema": Object {
          "nextPos": 1425,
          "pos": 1422,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1454,
          "pos": 1426,
          "tag": "Identifier",
          "value": "InstallationVerificationInfo",
        },
        "tag": "Table",
      },
      "table": "InstallationVerificationInfo",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ivi",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1781,
          "pos": 1778,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1781,
              "pos": 1778,
              "tag": "Identifier",
              "value": "ivi",
            },
          ],
        },
        "nextPos": 1781,
        "pos": 1745,
        "schema": Object {
          "nextPos": 1748,
          "pos": 1745,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1777,
          "pos": 1749,
          "tag": "Identifier",
          "value": "InstallationVerificationInfo",
        },
        "tag": "Table",
      },
      "table": "InstallationVerificationInfo",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2210,
          "pos": 2208,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2210,
              "pos": 2208,
              "tag": "Identifier",
              "value": "im",
            },
          ],
        },
        "nextPos": 2210,
        "pos": 2186,
        "schema": Object {
          "nextPos": 2189,
          "pos": 2186,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2207,
          "pos": 2190,
          "tag": "Identifier",
          "value": "InstallationMeter",
        },
        "tag": "Table",
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2231,
          "pos": 2230,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2231,
              "pos": 2230,
              "tag": "Identifier",
              "value": "m",
            },
          ],
        },
        "nextPos": 2231,
        "pos": 2220,
        "schema": Object {
          "nextPos": 2223,
          "pos": 2220,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2229,
          "pos": 2224,
          "tag": "Identifier",
          "value": "Meter",
        },
        "tag": "Table",
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2287,
          "pos": 2285,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2287,
              "pos": 2285,
              "tag": "Identifier",
              "value": "mt",
            },
          ],
        },
        "nextPos": 2287,
        "pos": 2271,
        "schema": Object {
          "nextPos": 2274,
          "pos": 2271,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2284,
          "pos": 2275,
          "tag": "Identifier",
          "value": "MeterType",
        },
        "tag": "Table",
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "s",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2507,
          "pos": 2506,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2507,
              "pos": 2506,
              "tag": "Identifier",
              "value": "s",
            },
          ],
        },
        "nextPos": 2507,
        "pos": 2495,
        "schema": Object {
          "nextPos": 2498,
          "pos": 2495,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2505,
          "pos": 2499,
          "tag": "Identifier",
          "value": "Switch",
        },
        "tag": "Table",
      },
      "table": "Switch",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "s",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2684,
          "pos": 2683,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2684,
              "pos": 2683,
              "tag": "Identifier",
              "value": "s",
            },
          ],
        },
        "nextPos": 2684,
        "pos": 2672,
        "schema": Object {
          "nextPos": 2675,
          "pos": 2672,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2682,
          "pos": 2676,
          "tag": "Identifier",
          "value": "Switch",
        },
        "tag": "Table",
      },
      "table": "Switch",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "s",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 2871,
          "pos": 2870,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 2871,
              "pos": 2870,
              "tag": "Identifier",
              "value": "s",
            },
          ],
        },
        "nextPos": 2871,
        "pos": 2859,
        "schema": Object {
          "nextPos": 2862,
          "pos": 2859,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 2869,
          "pos": 2863,
          "tag": "Identifier",
          "value": "Switch",
        },
        "tag": "Table",
      },
      "table": "Switch",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "i",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3087,
          "pos": 3086,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3087,
              "pos": 3086,
              "tag": "Identifier",
              "value": "i",
            },
          ],
        },
        "nextPos": 3087,
        "pos": 3069,
        "schema": Object {
          "nextPos": 3072,
          "pos": 3069,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3085,
          "pos": 3073,
          "tag": "Identifier",
          "value": "Installation",
        },
        "tag": "Table",
      },
      "table": "Installation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "it",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3116,
          "pos": 3114,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3116,
              "pos": 3114,
              "tag": "Identifier",
              "value": "it",
            },
          ],
        },
        "nextPos": 3116,
        "pos": 3093,
        "schema": Object {
          "nextPos": 3096,
          "pos": 3093,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3113,
          "pos": 3097,
          "tag": "Identifier",
          "value": "InstallationType",
        },
        "tag": "Table",
      },
      "table": "InstallationType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gtt",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3205,
          "pos": 3202,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3205,
              "pos": 3202,
              "tag": "Identifier",
              "value": "gtt",
            },
          ],
        },
        "nextPos": 3205,
        "pos": 3174,
        "schema": Object {
          "nextPos": 3177,
          "pos": 3174,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3201,
          "pos": 3178,
          "tag": "Identifier",
          "value": "GeneratorTechnologyType",
        },
        "tag": "Table",
      },
      "table": "GeneratorTechnologyType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "pt",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3297,
          "pos": 3295,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3297,
              "pos": 3295,
              "tag": "Identifier",
              "value": "pt",
            },
          ],
        },
        "nextPos": 3297,
        "pos": 3278,
        "schema": Object {
          "nextPos": 3281,
          "pos": 3278,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3294,
          "pos": 3282,
          "tag": "Identifier",
          "value": "PropertyType",
        },
        "tag": "Table",
      },
      "table": "PropertyType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gai",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3384,
          "pos": 3381,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3384,
              "pos": 3381,
              "tag": "Identifier",
              "value": "gai",
            },
          ],
        },
        "nextPos": 3384,
        "pos": 3347,
        "schema": Object {
          "nextPos": 3350,
          "pos": 3347,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3380,
          "pos": 3351,
          "tag": "Identifier",
          "value": "GenerationAccountInstallation",
        },
        "tag": "Table",
      },
      "table": "GenerationAccountInstallation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ga",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3459,
          "pos": 3457,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3459,
              "pos": 3457,
              "tag": "Identifier",
              "value": "ga",
            },
          ],
        },
        "nextPos": 3459,
        "pos": 3435,
        "schema": Object {
          "nextPos": 3438,
          "pos": 3435,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3456,
          "pos": 3439,
          "tag": "Identifier",
          "value": "GenerationAccount",
        },
        "tag": "Table",
      },
      "table": "GenerationAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ca",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3677,
          "pos": 3675,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3677,
              "pos": 3675,
              "tag": "Identifier",
              "value": "ca",
            },
          ],
        },
        "nextPos": 3677,
        "pos": 3655,
        "schema": Object {
          "nextPos": 3658,
          "pos": 3655,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3674,
          "pos": 3659,
          "tag": "Identifier",
          "value": "CustomerAccount",
        },
        "tag": "Table",
      },
      "table": "CustomerAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 3809,
          "pos": 3808,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 3809,
              "pos": 3808,
              "tag": "Identifier",
              "value": "c",
            },
          ],
        },
        "nextPos": 3809,
        "pos": 3795,
        "schema": Object {
          "nextPos": 3798,
          "pos": 3795,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 3807,
          "pos": 3799,
          "tag": "Identifier",
          "value": "Customer",
        },
        "tag": "Table",
      },
      "table": "Customer",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql meter-reads.sql: meter-reads.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "meter_reads",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 23,
        "pos": 12,
        "table": Object {
          "nextPos": 23,
          "pos": 12,
          "tag": "Identifier",
          "value": "meter_reads",
        },
        "tag": "Table",
      },
      "table": "meter_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "meters",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 214,
        "pos": 208,
        "table": Object {
          "nextPos": 214,
          "pos": 208,
          "tag": "Identifier",
          "value": "meters",
        },
        "tag": "Table",
      },
      "table": "meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mr",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1158,
          "pos": 1156,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1158,
              "pos": 1156,
              "tag": "Identifier",
              "value": "mr",
            },
          ],
        },
        "nextPos": 1158,
        "pos": 1139,
        "schema": Object {
          "nextPos": 1142,
          "pos": 1139,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1155,
          "pos": 1143,
          "tag": "Identifier",
          "value": "MeterReading",
        },
        "tag": "Table",
      },
      "table": "MeterReading",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "as": Object {
          "nextPos": 1175,
          "pos": 1174,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 1175,
              "pos": 1174,
              "tag": "Identifier",
              "value": "m",
            },
          ],
        },
        "nextPos": 1175,
        "pos": 1164,
        "schema": Object {
          "nextPos": 1167,
          "pos": 1164,
          "tag": "Identifier",
          "value": "fit",
        },
        "table": Object {
          "nextPos": 1173,
          "pos": 1168,
          "tag": "Identifier",
          "value": "Meter",
        },
        "tag": "Table",
      },
      "table": "Meter",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql process-batch.query.sql: process-batch.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "fitIds",
      "nextPos": 797,
      "pick": Array [],
      "pos": 790,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "column": "legacy_fit_db_id",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 783,
            "pos": 753,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 766,
                "pos": 753,
                "tag": "Identifier",
                "value": "installations",
              },
              Object {
                "nextPos": 783,
                "pos": 767,
                "tag": "Identifier",
                "value": "legacy_fit_db_id",
              },
            ],
          },
          "table": "installations",
          "type": "LoadColumn",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "cfrFiTId",
      "type": Object {
        "column": "legacy_fit_db_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 39,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 22,
              "pos": 9,
              "tag": "Identifier",
              "value": "installations",
            },
            Object {
              "nextPos": 39,
              "pos": 23,
              "tag": "Identifier",
              "value": "legacy_fit_db_id",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "email",
      "type": Object {
        "column": "email",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 71,
          "pos": 57,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 65,
              "pos": 57,
              "tag": "Identifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 71,
              "pos": 66,
              "tag": "Identifier",
              "value": "email",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "contactName",
      "type": Object {
        "args": Array [
          Object {
            "column": "first_name",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 112,
              "pos": 93,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 101,
                  "pos": 93,
                  "tag": "Identifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 112,
                  "pos": 102,
                  "tag": "Identifier",
                  "value": "first_name",
                },
              ],
            },
            "table": "contacts",
            "type": "LoadColumn",
          },
          Object {
            "literal": " ",
            "type": "String",
          },
          Object {
            "column": "last_name",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 136,
              "pos": 118,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 126,
                  "pos": 118,
                  "tag": "Identifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 136,
                  "pos": 127,
                  "tag": "Identifier",
                  "value": "last_name",
                },
              ],
            },
            "table": "contacts",
            "type": "LoadColumn",
          },
        ],
        "name": "concat",
        "sourceTag": Object {
          "nextPos": 137,
          "pos": 86,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 92,
              "pos": 86,
              "tag": "Identifier",
              "value": "CONCAT",
            },
            Object {
              "nextPos": 112,
              "pos": 93,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 101,
                  "pos": 93,
                  "tag": "Identifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 112,
                  "pos": 102,
                  "tag": "Identifier",
                  "value": "first_name",
                },
              ],
            },
            Object {
              "nextPos": 116,
              "pos": 113,
              "tag": "String",
              "value": " ",
            },
            Object {
              "nextPos": 136,
              "pos": 118,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 126,
                  "pos": 118,
                  "tag": "Identifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 136,
                  "pos": 127,
                  "tag": "Identifier",
                  "value": "last_name",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "company",
      "type": Object {
        "column": "company_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 180,
          "pos": 158,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 167,
              "pos": 158,
              "tag": "Identifier",
              "value": "customers",
            },
            Object {
              "nextPos": 180,
              "pos": 168,
              "tag": "Identifier",
              "value": "company_name",
            },
          ],
        },
        "table": "customers",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "line1",
      "type": Object {
        "column": "address_line_1",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 221,
          "pos": 197,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 206,
              "pos": 197,
              "tag": "Identifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 221,
              "pos": 207,
              "tag": "Identifier",
              "value": "address_line_1",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "line2",
      "type": Object {
        "args": Array [
          Object {
            "column": "address_line_2",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 267,
              "pos": 243,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 252,
                  "pos": 243,
                  "tag": "Identifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 267,
                  "pos": 253,
                  "tag": "Identifier",
                  "value": "address_line_2",
                },
              ],
            },
            "table": "addresses",
            "type": "LoadColumn",
          },
          Object {
            "literal": " ",
            "type": "String",
          },
          Object {
            "column": "address_line_3",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 298,
              "pos": 274,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 283,
                  "pos": 274,
                  "tag": "Identifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 298,
                  "pos": 284,
                  "tag": "Identifier",
                  "value": "address_line_3",
                },
              ],
            },
            "table": "addresses",
            "type": "LoadColumn",
          },
        ],
        "name": "concat",
        "sourceTag": Object {
          "nextPos": 299,
          "pos": 236,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 242,
              "pos": 236,
              "tag": "Identifier",
              "value": "CONCAT",
            },
            Object {
              "nextPos": 267,
              "pos": 243,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 252,
                  "pos": 243,
                  "tag": "Identifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 267,
                  "pos": 253,
                  "tag": "Identifier",
                  "value": "address_line_2",
                },
              ],
            },
            Object {
              "nextPos": 272,
              "pos": 269,
              "tag": "String",
              "value": " ",
            },
            Object {
              "nextPos": 298,
              "pos": 274,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 283,
                  "pos": 274,
                  "tag": "Identifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 298,
                  "pos": 284,
                  "tag": "Identifier",
                  "value": "address_line_3",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "town",
      "type": Object {
        "column": "city",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 328,
          "pos": 314,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 323,
              "pos": 314,
              "tag": "Identifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 328,
              "pos": 324,
              "tag": "Identifier",
              "value": "city",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "postcode",
      "type": Object {
        "column": "postcode",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 360,
          "pos": 342,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 351,
              "pos": 342,
              "tag": "Identifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 360,
              "pos": 352,
              "tag": "Identifier",
              "value": "postcode",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "county",
      "type": Object {
        "column": "county",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 394,
          "pos": 378,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 387,
              "pos": 378,
              "tag": "Identifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 394,
              "pos": 388,
              "tag": "Identifier",
              "value": "county",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "country",
      "type": Object {
        "column": "country",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 427,
          "pos": 410,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 419,
              "pos": 410,
              "tag": "Identifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 427,
              "pos": 420,
              "tag": "Identifier",
              "value": "country",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 459,
        "pos": 446,
        "table": Object {
          "nextPos": 459,
          "pos": 446,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 474,
        "pos": 465,
        "table": Object {
          "nextPos": 474,
          "pos": 465,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 536,
        "pos": 528,
        "table": Object {
          "nextPos": 536,
          "pos": 528,
          "tag": "Identifier",
          "value": "accounts",
        },
        "tag": "Table",
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 589,
        "pos": 580,
        "table": Object {
          "nextPos": 589,
          "pos": 580,
          "tag": "Identifier",
          "value": "customers",
        },
        "tag": "Table",
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 642,
        "pos": 634,
        "table": Object {
          "nextPos": 642,
          "pos": 634,
          "tag": "Identifier",
          "value": "contacts",
        },
        "tag": "Table",
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 708,
        "pos": 699,
        "table": Object {
          "nextPos": 708,
          "pos": 699,
          "tag": "Identifier",
          "value": "addresses",
        },
        "tag": "Table",
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql rates-by-tarrif-ids.query.sql: rates-by-tarrif-ids.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "ids",
      "nextPos": 319,
      "pick": Array [],
      "pos": 314,
      "required": false,
      "spread": true,
      "type": Object {
        "items": Object {
          "column": "id",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 310,
            "pos": 306,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 307,
                "pos": 306,
                "tag": "Identifier",
                "value": "t",
              },
              Object {
                "nextPos": 310,
                "pos": 308,
                "tag": "Identifier",
                "value": "id",
              },
            ],
          },
          "table": "t",
          "type": "LoadColumn",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "tariffId",
      "type": Object {
        "column": "tariff_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 20,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 10,
              "pos": 9,
              "tag": "Identifier",
              "value": "r",
            },
            Object {
              "nextPos": 20,
              "pos": 11,
              "tag": "Identifier",
              "value": "tariff_id",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "rate",
      "type": Object {
        "column": "rate",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 44,
          "pos": 38,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 39,
              "pos": 38,
              "tag": "Identifier",
              "value": "r",
            },
            Object {
              "nextPos": 44,
              "pos": 40,
              "tag": "Identifier",
              "value": "rate",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "startOn",
      "type": Object {
        "column": "start_date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 63,
          "pos": 48,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 49,
              "pos": 48,
              "tag": "Identifier",
              "value": "r",
            },
            Object {
              "nextPos": 63,
              "pos": 50,
              "tag": "Identifier",
              "value": "start_date_on",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "tariffCode",
      "type": Object {
        "column": "code",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 86,
          "pos": 80,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 81,
              "pos": 80,
              "tag": "Identifier",
              "value": "t",
            },
            Object {
              "nextPos": 86,
              "pos": 82,
              "tag": "Identifier",
              "value": "code",
            },
          ],
        },
        "table": "t",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "tariffType",
      "type": Object {
        "column": "type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 112,
          "pos": 106,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 107,
              "pos": 106,
              "tag": "Identifier",
              "value": "t",
            },
            Object {
              "nextPos": 112,
              "pos": 108,
              "tag": "Identifier",
              "value": "type",
            },
          ],
        },
        "table": "t",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "endOn",
      "type": Object {
        "column": "end_date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 145,
          "pos": 132,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 133,
              "pos": 132,
              "tag": "Identifier",
              "value": "r",
            },
            Object {
              "nextPos": 145,
              "pos": 134,
              "tag": "Identifier",
              "value": "end_date_on",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "r",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 176,
          "pos": 175,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 176,
              "pos": 175,
              "tag": "Identifier",
              "value": "r",
            },
          ],
        },
        "nextPos": 176,
        "pos": 162,
        "table": Object {
          "nextPos": 174,
          "pos": 162,
          "tag": "Identifier",
          "value": "tariff_rates",
        },
        "tag": "Table",
      },
      "table": "tariff_rates",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "t",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 196,
          "pos": 195,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 196,
              "pos": 195,
              "tag": "Identifier",
              "value": "t",
            },
          ],
        },
        "nextPos": 196,
        "pos": 187,
        "table": Object {
          "nextPos": 194,
          "pos": 187,
          "tag": "Identifier",
          "value": "tariffs",
        },
        "tag": "Table",
      },
      "table": "tariffs",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql read-create.query.sql: read-create.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "meterId",
      "nextPos": 100,
      "pick": Array [],
      "pos": 92,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "as": undefined,
              "nextPos": 24,
              "pos": 13,
              "table": Object {
                "nextPos": 24,
                "pos": 13,
                "tag": "Identifier",
                "value": "meter_reads",
              },
              "tag": "Table",
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "Identifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "Identifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "Identifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "Identifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "Identifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "Identifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "param": undefined,
                              "pos": 206,
                              "tag": "Type",
                              "value": "int",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "Identifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "Identifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "Identifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "Identifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "Identifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "Identifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "reason",
      "nextPos": 109,
      "pick": Array [],
      "pos": 102,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "reason",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "as": undefined,
              "nextPos": 24,
              "pos": 13,
              "table": Object {
                "nextPos": 24,
                "pos": 13,
                "tag": "Identifier",
                "value": "meter_reads",
              },
              "tag": "Table",
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "Identifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "Identifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "Identifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "Identifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "Identifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "Identifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "param": undefined,
                              "pos": 206,
                              "tag": "Type",
                              "value": "int",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "Identifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "Identifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "Identifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "Identifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "Identifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "Identifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "type",
      "nextPos": 116,
      "pick": Array [],
      "pos": 111,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "as": undefined,
              "nextPos": 24,
              "pos": 13,
              "table": Object {
                "nextPos": 24,
                "pos": 13,
                "tag": "Identifier",
                "value": "meter_reads",
              },
              "tag": "Table",
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "Identifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "Identifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "Identifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "Identifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "Identifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "Identifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "param": undefined,
                              "pos": 206,
                              "tag": "Type",
                              "value": "int",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "Identifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "Identifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "Identifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "Identifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "Identifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "Identifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "dateOn",
      "nextPos": 134,
      "pick": Array [],
      "pos": 127,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "as": undefined,
              "nextPos": 24,
              "pos": 13,
              "table": Object {
                "nextPos": 24,
                "pos": 13,
                "tag": "Identifier",
                "value": "meter_reads",
              },
              "tag": "Table",
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "Identifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "Identifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "Identifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "Identifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "Identifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "Identifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "param": undefined,
                              "pos": 206,
                              "tag": "Type",
                              "value": "int",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "Identifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "Identifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "Identifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "Identifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "Identifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "Identifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "submittedAt",
      "nextPos": 172,
      "pick": Array [],
      "pos": 160,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "submitted_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "as": undefined,
              "nextPos": 24,
              "pos": 13,
              "table": Object {
                "nextPos": 24,
                "pos": 13,
                "tag": "Identifier",
                "value": "meter_reads",
              },
              "tag": "Table",
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "Identifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "Identifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "Identifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "Identifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "Identifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "Identifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "Identifier",
                              "value": "CURRENT_DATE",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "ConditionalExpression",
                      "type": "COALESCE",
                      "values": Array [
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "param": undefined,
                              "pos": 206,
                              "tag": "Type",
                              "value": "int",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "Identifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "Identifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "Identifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "Identifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "Identifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "Identifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "nextPos": 204,
      "pick": Array [],
      "pos": 198,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "Number",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 229,
          "pos": 227,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 229,
              "pos": 227,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "type": Object {
        "column": "value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 240,
          "pos": 233,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 240,
              "pos": 233,
              "tag": "Identifier",
              "value": "value",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "meterId",
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 252,
          "pos": 244,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 252,
              "pos": 244,
              "tag": "Identifier",
              "value": "meter_id",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "submittedAt",
      "type": Object {
        "column": "submitted_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 281,
          "pos": 269,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 281,
              "pos": 269,
              "tag": "Identifier",
              "value": "submitted_at",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "meter_reads",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 24,
        "pos": 13,
        "table": Object {
          "nextPos": 24,
          "pos": 13,
          "tag": "Identifier",
          "value": "meter_reads",
        },
        "tag": "Table",
      },
      "table": "meter_reads",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql reads-by-account-id.query.sql: reads-by-account-id.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "id",
      "nextPos": 596,
      "pick": Array [],
      "pos": 593,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "account_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 590,
          "pos": 578,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 579,
              "pos": 578,
              "tag": "Identifier",
              "value": "c",
            },
            Object {
              "nextPos": 590,
              "pos": 580,
              "tag": "Identifier",
              "value": "account_id",
            },
          ],
        },
        "table": "c",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "offset",
      "nextPos": 631,
      "pick": Array [],
      "pos": 624,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
    Object {
      "name": "perPage",
      "nextPos": 646,
      "pick": Array [],
      "pos": 638,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 14,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 11,
              "pos": 9,
              "tag": "Identifier",
              "value": "mr",
            },
            Object {
              "nextPos": 14,
              "pos": 12,
              "tag": "Identifier",
              "value": "id",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "msn",
      "type": Object {
        "column": "serial_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 33,
          "pos": 18,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 19,
              "pos": 18,
              "tag": "Identifier",
              "value": "m",
            },
            Object {
              "nextPos": 33,
              "pos": 20,
              "tag": "Identifier",
              "value": "serial_number",
            },
          ],
        },
        "table": "m",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "meterId",
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 57,
          "pos": 46,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 48,
              "pos": 46,
              "tag": "Identifier",
              "value": "mr",
            },
            Object {
              "nextPos": 57,
              "pos": 49,
              "tag": "Identifier",
              "value": "meter_id",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "dateOn",
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 81,
          "pos": 74,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 81,
              "pos": 74,
              "tag": "Identifier",
              "value": "date_on",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "type": Object {
        "column": "value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 102,
          "pos": 97,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 102,
              "pos": 97,
              "tag": "Identifier",
              "value": "value",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "type",
      "type": Object {
        "column": "type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 113,
          "pos": 106,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 108,
              "pos": 106,
              "tag": "Identifier",
              "value": "mr",
            },
            Object {
              "nextPos": 113,
              "pos": 109,
              "tag": "Identifier",
              "value": "type",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "reason",
      "type": Object {
        "column": "reason",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 123,
          "pos": 117,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 123,
              "pos": 117,
              "tag": "Identifier",
              "value": "reason",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "createdAt",
      "type": Object {
        "column": "created_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 140,
          "pos": 127,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 129,
              "pos": 127,
              "tag": "Identifier",
              "value": "mr",
            },
            Object {
              "nextPos": 140,
              "pos": 130,
              "tag": "Identifier",
              "value": "created_at",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "updatedAt",
      "type": Object {
        "column": "updated_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 172,
          "pos": 159,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 161,
              "pos": 159,
              "tag": "Identifier",
              "value": "mr",
            },
            Object {
              "nextPos": 172,
              "pos": 162,
              "tag": "Identifier",
              "value": "updated_at",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "sourceSystemId",
      "type": Object {
        "column": "source_system_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 210,
          "pos": 191,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 193,
              "pos": 191,
              "tag": "Identifier",
              "value": "mr",
            },
            Object {
              "nextPos": 210,
              "pos": 194,
              "tag": "Identifier",
              "value": "source_system_id",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "mpan",
      "type": Object {
        "column": "mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 240,
          "pos": 234,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 235,
              "pos": 234,
              "tag": "Identifier",
              "value": "m",
            },
            Object {
              "nextPos": 240,
              "pos": 236,
              "tag": "Identifier",
              "value": "mpan",
            },
          ],
        },
        "table": "m",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "mr",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 260,
          "pos": 258,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 260,
              "pos": 258,
              "tag": "Identifier",
              "value": "mr",
            },
          ],
        },
        "nextPos": 260,
        "pos": 246,
        "table": Object {
          "nextPos": 257,
          "pos": 246,
          "tag": "Identifier",
          "value": "meter_reads",
        },
        "tag": "Table",
      },
      "table": "meter_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 286,
          "pos": 285,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 286,
              "pos": 285,
              "tag": "Identifier",
              "value": "m",
            },
          ],
        },
        "nextPos": 286,
        "pos": 278,
        "table": Object {
          "nextPos": 284,
          "pos": 278,
          "tag": "Identifier",
          "value": "meters",
        },
        "tag": "Table",
      },
      "table": "meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 365,
          "pos": 363,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 365,
              "pos": 363,
              "tag": "Identifier",
              "value": "im",
            },
          ],
        },
        "nextPos": 365,
        "pos": 343,
        "table": Object {
          "nextPos": 362,
          "pos": 343,
          "tag": "Identifier",
          "value": "installation_meters",
        },
        "tag": "Table",
      },
      "table": "installation_meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "i",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 438,
          "pos": 437,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 438,
              "pos": 437,
              "tag": "Identifier",
              "value": "i",
            },
          ],
        },
        "nextPos": 438,
        "pos": 423,
        "table": Object {
          "nextPos": 436,
          "pos": 423,
          "tag": "Identifier",
          "value": "installations",
        },
        "tag": "Table",
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c",
      "schema": undefined,
      "sourceTag": Object {
        "as": Object {
          "nextPos": 513,
          "pos": 512,
          "tag": "As",
          "values": Array [
            Object {
              "nextPos": 513,
              "pos": 512,
              "tag": "Identifier",
              "value": "c",
            },
          ],
        },
        "nextPos": 513,
        "pos": 502,
        "table": Object {
          "nextPos": 511,
          "pos": 502,
          "tag": "Identifier",
          "value": "contracts",
        },
        "tag": "Table",
      },
      "table": "contracts",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql tables.sql: tables.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "tableNames",
      "nextPos": 376,
      "pick": Array [
        Object {
          "name": "schema",
          "type": Object {
            "type": "Unknown",
          },
        },
        Object {
          "name": "name",
          "type": Object {
            "type": "Unknown",
          },
        },
      ],
      "pos": 350,
      "required": true,
      "spread": true,
      "type": Object {
        "items": Object {
          "name": "row",
          "type": "Named",
          "value": Object {
            "type": "String",
          },
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "type",
      "type": Object {
        "literal": "Table",
        "type": "String",
      },
    },
    Object {
      "name": "name",
      "type": Object {
        "items": Array [
          Object {
            "name": "schema",
            "type": Object {
              "column": "table_schema",
              "schema": undefined,
              "sourceTag": Object {
                "nextPos": 70,
                "pos": 58,
                "tag": "Column",
                "values": Array [
                  Object {
                    "nextPos": 70,
                    "pos": 58,
                    "tag": "Identifier",
                    "value": "table_schema",
                  },
                ],
              },
              "table": undefined,
              "type": "LoadColumn",
            },
          },
          Object {
            "name": "name",
            "type": Object {
              "column": "table_name",
              "schema": undefined,
              "sourceTag": Object {
                "nextPos": 90,
                "pos": 80,
                "tag": "Column",
                "values": Array [
                  Object {
                    "nextPos": 90,
                    "pos": 80,
                    "tag": "Identifier",
                    "value": "table_name",
                  },
                ],
              },
              "table": undefined,
              "type": "LoadColumn",
            },
          },
        ],
        "type": "ObjectLiteral",
      },
    },
    Object {
      "name": "columns",
      "type": Object {
        "items": Object {
          "items": Array [
            Object {
              "name": "name",
              "type": Object {
                "column": "column_name",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 156,
                  "pos": 145,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 156,
                      "pos": 145,
                      "tag": "Identifier",
                      "value": "column_name",
                    },
                  ],
                },
                "table": undefined,
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "isNullable",
              "type": Object {
                "column": "is_nullable",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 183,
                  "pos": 172,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 183,
                      "pos": 172,
                      "tag": "Identifier",
                      "value": "is_nullable",
                    },
                  ],
                },
                "table": undefined,
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "enum",
              "type": Object {
                "column": "udt_name",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 201,
                  "pos": 193,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 201,
                      "pos": 193,
                      "tag": "Identifier",
                      "value": "udt_name",
                    },
                  ],
                },
                "table": undefined,
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "type",
              "type": Object {
                "column": "data_type",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 220,
                  "pos": 211,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 220,
                      "pos": 211,
                      "tag": "Identifier",
                      "value": "data_type",
                    },
                  ],
                },
                "table": undefined,
                "type": "LoadColumn",
              },
            },
          ],
          "type": "ObjectLiteral",
        },
        "type": "Array",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "columns",
      "schema": "information_schema",
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 312,
        "pos": 286,
        "schema": Object {
          "nextPos": 304,
          "pos": 286,
          "tag": "Identifier",
          "value": "information_schema",
        },
        "table": Object {
          "nextPos": 312,
          "pos": 305,
          "tag": "Identifier",
          "value": "columns",
        },
        "tag": "Table",
      },
      "table": "columns",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql tariff-rates.sql: tariff-rates.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "as": undefined,
        "nextPos": 19,
        "pos": 12,
        "table": Object {
          "nextPos": 19,
          "pos": 12,
          "tag": "Identifier",
          "value": "tariffs",
        },
        "tag": "Table",
      },
      "table": "tariffs",
      "type": "Table",
    },
  ],
}
`;
