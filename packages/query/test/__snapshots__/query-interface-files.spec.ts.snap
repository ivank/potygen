// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Query Interface Should convert complex sql account-levelisation.update.query.sql: account-levelisation.update.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "isAccepted",
      "nextPos": 66,
      "pick": Array [],
      "pos": 55,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "is_accepted",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 52,
          "pos": 41,
          "tag": "UnquotedIdentifier",
          "value": "is_accepted",
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "id",
      "nextPos": 109,
      "pick": Array [],
      "pos": 106,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 103,
          "pos": 79,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 100,
              "pos": 79,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 103,
              "pos": 101,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 128,
          "pos": 126,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 128,
              "pos": 126,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isAccepted",
      "type": Object {
        "column": "is_accepted",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 145,
          "pos": 134,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 145,
              "pos": 134,
              "tag": "UnquotedIdentifier",
              "value": "is_accepted",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 30,
        "pos": 9,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 30,
            "pos": 9,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 30,
                "pos": 9,
                "tag": "UnquotedIdentifier",
                "value": "account_levelisations",
              },
            ],
          },
        ],
      },
      "table": "account_levelisations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisation.upsert.query.sql: account-levelisation.upsert.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "levelisationId",
      "nextPos": 183,
      "pick": Array [],
      "pos": 168,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "levelisation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 665,
          "pos": 1,
          "tag": "Insert",
          "values": Array [
            Object {
              "nextPos": 36,
              "pos": 15,
              "tag": "Table",
              "values": Array [
                Object {
                  "nextPos": 36,
                  "pos": 15,
                  "tag": "QualifiedIdentifier",
                  "values": Array [
                    Object {
                      "nextPos": 36,
                      "pos": 15,
                      "tag": "UnquotedIdentifier",
                      "value": "account_levelisations",
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 90,
              "pos": 37,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 48,
                  "pos": 38,
                  "tag": "UnquotedIdentifier",
                  "value": "account_id",
                },
                Object {
                  "nextPos": 65,
                  "pos": 50,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_id",
                },
                Object {
                  "nextPos": 82,
                  "pos": 67,
                  "tag": "UnquotedIdentifier",
                  "value": "levelisation_id",
                },
                Object {
                  "nextPos": 89,
                  "pos": 84,
                  "tag": "UnquotedIdentifier",
                  "value": "state",
                },
              ],
            },
            Object {
              "nextPos": 552,
              "pos": 91,
              "tag": "Select",
              "values": Array [
                Object {
                  "nextPos": 215,
                  "pos": 100,
                  "tag": "SelectList",
                  "values": Array [
                    Object {
                      "nextPos": 125,
                      "pos": 100,
                      "tag": "SelectListItem",
                      "values": Array [
                        Object {
                          "nextPos": 111,
                          "pos": 100,
                          "tag": "Column",
                          "values": Array [
                            Object {
                              "nextPos": 108,
                              "pos": 100,
                              "tag": "UnquotedIdentifier",
                              "value": "accounts",
                            },
                            Object {
                              "nextPos": 111,
                              "pos": 109,
                              "tag": "UnquotedIdentifier",
                              "value": "id",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 125,
                          "pos": 112,
                          "tag": "As",
                          "values": Array [
                            Object {
                              "nextPos": 125,
                              "pos": 115,
                              "tag": "UnquotedIdentifier",
                              "value": "account_id",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 164,
                      "pos": 129,
                      "tag": "SelectListItem",
                      "values": Array [
                        Object {
                          "nextPos": 145,
                          "pos": 129,
                          "tag": "Column",
                          "values": Array [
                            Object {
                              "nextPos": 142,
                              "pos": 129,
                              "tag": "UnquotedIdentifier",
                              "value": "installations",
                            },
                            Object {
                              "nextPos": 145,
                              "pos": 143,
                              "tag": "UnquotedIdentifier",
                              "value": "id",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 164,
                          "pos": 146,
                          "tag": "As",
                          "values": Array [
                            Object {
                              "nextPos": 164,
                              "pos": 149,
                              "tag": "UnquotedIdentifier",
                              "value": "installation_id",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 202,
                      "pos": 168,
                      "tag": "SelectListItem",
                      "values": Array [
                        Object {
                          "nextPos": 183,
                          "pick": Array [],
                          "pos": 168,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "levelisationId",
                        },
                        Object {
                          "nextPos": 202,
                          "pos": 184,
                          "tag": "As",
                          "values": Array [
                            Object {
                              "nextPos": 202,
                              "pos": 187,
                              "tag": "UnquotedIdentifier",
                              "value": "levelisation_id",
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 215,
                      "pos": 206,
                      "tag": "SelectListItem",
                      "values": Array [
                        Object {
                          "nextPos": 215,
                          "pos": 206,
                          "tag": "String",
                          "value": "Pending",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 354,
                  "pos": 216,
                  "tag": "From",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 221,
                      "tag": "FromList",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 221,
                          "tag": "Table",
                          "values": Array [
                            Object {
                              "nextPos": 229,
                              "pos": 221,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 229,
                                  "pos": 221,
                                  "tag": "UnquotedIdentifier",
                                  "value": "accounts",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 282,
                      "pos": 230,
                      "tag": "Join",
                      "values": Array [
                        Object {
                          "nextPos": 234,
                          "pos": 230,
                          "tag": "JoinType",
                          "value": "JOIN",
                        },
                        Object {
                          "nextPos": 244,
                          "pos": 235,
                          "tag": "Table",
                          "values": Array [
                            Object {
                              "nextPos": 244,
                              "pos": 235,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 244,
                                  "pos": 235,
                                  "tag": "UnquotedIdentifier",
                                  "value": "contracts",
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 282,
                          "pos": 245,
                          "tag": "JoinOn",
                          "values": Array [
                            Object {
                              "nextPos": 282,
                              "pos": 248,
                              "tag": "BinaryExpression",
                              "values": Array [
                                Object {
                                  "nextPos": 268,
                                  "pos": 248,
                                  "tag": "Column",
                                  "values": Array [
                                    Object {
                                      "nextPos": 257,
                                      "pos": 248,
                                      "tag": "UnquotedIdentifier",
                                      "value": "contracts",
                                    },
                                    Object {
                                      "nextPos": 268,
                                      "pos": 258,
                                      "tag": "UnquotedIdentifier",
                                      "value": "account_id",
                                    },
                                  ],
                                },
                                Object {
                                  "nextPos": 270,
                                  "pos": 269,
                                  "tag": "BinaryOperator",
                                  "value": "=",
                                },
                                Object {
                                  "nextPos": 282,
                                  "pos": 271,
                                  "tag": "Column",
                                  "values": Array [
                                    Object {
                                      "nextPos": 279,
                                      "pos": 271,
                                      "tag": "UnquotedIdentifier",
                                      "value": "accounts",
                                    },
                                    Object {
                                      "nextPos": 282,
                                      "pos": 280,
                                      "tag": "UnquotedIdentifier",
                                      "value": "id",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 354,
                      "pos": 283,
                      "tag": "Join",
                      "values": Array [
                        Object {
                          "nextPos": 292,
                          "pos": 283,
                          "tag": "JoinType",
                          "value": "LEFT JOIN",
                        },
                        Object {
                          "nextPos": 306,
                          "pos": 293,
                          "tag": "Table",
                          "values": Array [
                            Object {
                              "nextPos": 306,
                              "pos": 293,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 306,
                                  "pos": 293,
                                  "tag": "UnquotedIdentifier",
                                  "value": "installations",
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 354,
                          "pos": 307,
                          "tag": "JoinOn",
                          "values": Array [
                            Object {
                              "nextPos": 354,
                              "pos": 310,
                              "tag": "BinaryExpression",
                              "values": Array [
                                Object {
                                  "nextPos": 335,
                                  "pos": 310,
                                  "tag": "Column",
                                  "values": Array [
                                    Object {
                                      "nextPos": 319,
                                      "pos": 310,
                                      "tag": "UnquotedIdentifier",
                                      "value": "contracts",
                                    },
                                    Object {
                                      "nextPos": 335,
                                      "pos": 320,
                                      "tag": "UnquotedIdentifier",
                                      "value": "installation_id",
                                    },
                                  ],
                                },
                                Object {
                                  "nextPos": 337,
                                  "pos": 336,
                                  "tag": "BinaryOperator",
                                  "value": "=",
                                },
                                Object {
                                  "nextPos": 354,
                                  "pos": 338,
                                  "tag": "Column",
                                  "values": Array [
                                    Object {
                                      "nextPos": 351,
                                      "pos": 338,
                                      "tag": "UnquotedIdentifier",
                                      "value": "installations",
                                    },
                                    Object {
                                      "nextPos": 354,
                                      "pos": 352,
                                      "tag": "UnquotedIdentifier",
                                      "value": "id",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 513,
                  "pos": 355,
                  "tag": "Where",
                  "values": Array [
                    Object {
                      "nextPos": 513,
                      "pos": 363,
                      "tag": "BinaryExpression",
                      "values": Array [
                        Object {
                          "nextPos": 417,
                          "pos": 363,
                          "tag": "WrappedExpression",
                          "values": Array [
                            Object {
                              "nextPos": 416,
                              "pos": 364,
                              "tag": "BinaryExpression",
                              "values": Array [
                                Object {
                                  "nextPos": 387,
                                  "pos": 364,
                                  "tag": "BinaryExpression",
                                  "values": Array [
                                    Object {
                                      "nextPos": 379,
                                      "pos": 364,
                                      "tag": "Column",
                                      "values": Array [
                                        Object {
                                          "nextPos": 372,
                                          "pos": 364,
                                          "tag": "UnquotedIdentifier",
                                          "value": "accounts",
                                        },
                                        Object {
                                          "nextPos": 379,
                                          "pos": 373,
                                          "tag": "UnquotedIdentifier",
                                          "value": "end_on",
                                        },
                                      ],
                                    },
                                    Object {
                                      "nextPos": 382,
                                      "pos": 380,
                                      "tag": "BinaryOperator",
                                      "value": "IS",
                                    },
                                    Object {
                                      "nextPos": 387,
                                      "pos": 383,
                                      "tag": "Null",
                                    },
                                  ],
                                },
                                Object {
                                  "nextPos": 390,
                                  "pos": 388,
                                  "tag": "BinaryOperator",
                                  "value": "OR",
                                },
                                Object {
                                  "nextPos": 416,
                                  "pos": 391,
                                  "tag": "BinaryExpression",
                                  "values": Array [
                                    Object {
                                      "nextPos": 406,
                                      "pos": 391,
                                      "tag": "Column",
                                      "values": Array [
                                        Object {
                                          "nextPos": 399,
                                          "pos": 391,
                                          "tag": "UnquotedIdentifier",
                                          "value": "accounts",
                                        },
                                        Object {
                                          "nextPos": 406,
                                          "pos": 400,
                                          "tag": "UnquotedIdentifier",
                                          "value": "end_on",
                                        },
                                      ],
                                    },
                                    Object {
                                      "nextPos": 409,
                                      "pos": 407,
                                      "tag": "BinaryOperator",
                                      "value": ">=",
                                    },
                                    Object {
                                      "nextPos": 416,
                                      "pick": Array [],
                                      "pos": 410,
                                      "required": false,
                                      "tag": "Parameter",
                                      "type": "single",
                                      "value": "start",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 423,
                          "pos": 420,
                          "tag": "BinaryOperator",
                          "value": "AND",
                        },
                        Object {
                          "nextPos": 513,
                          "pos": 424,
                          "tag": "BinaryExpression",
                          "values": Array [
                            Object {
                              "nextPos": 445,
                              "pos": 424,
                              "tag": "Column",
                              "values": Array [
                                Object {
                                  "nextPos": 433,
                                  "pos": 424,
                                  "tag": "UnquotedIdentifier",
                                  "value": "contracts",
                                },
                                Object {
                                  "nextPos": 445,
                                  "pos": 434,
                                  "tag": "UnquotedIdentifier",
                                  "value": "export_type",
                                },
                              ],
                            },
                            Object {
                              "nextPos": 447,
                              "pos": 446,
                              "tag": "BinaryOperator",
                              "value": "=",
                            },
                            Object {
                              "nextPos": 513,
                              "pos": 448,
                              "tag": "Function",
                              "values": Array [
                                Object {
                                  "nextPos": 451,
                                  "pos": 448,
                                  "tag": "QualifiedIdentifier",
                                  "values": Array [
                                    Object {
                                      "nextPos": 451,
                                      "pos": 448,
                                      "tag": "UnquotedIdentifier",
                                      "value": "ANY",
                                    },
                                  ],
                                },
                                Object {
                                  "nextPos": 512,
                                  "pos": 452,
                                  "tag": "PgCast",
                                  "values": Array [
                                    Object {
                                      "nextPos": 484,
                                      "pos": 452,
                                      "tag": "ArrayConstructor",
                                      "values": Array [
                                        Object {
                                          "nextPos": 474,
                                          "pos": 458,
                                          "tag": "String",
                                          "value": "Metered Export",
                                        },
                                        Object {
                                          "nextPos": 483,
                                          "pos": 475,
                                          "tag": "String",
                                          "value": "Deemed",
                                        },
                                      ],
                                    },
                                    Object {
                                      "nextPos": 512,
                                      "pos": 486,
                                      "tag": "TypeArray",
                                      "values": Array [
                                        Object {
                                          "nextPos": 510,
                                          "pos": 486,
                                          "tag": "Type",
                                          "values": Array [
                                            Object {
                                              "nextPos": 510,
                                              "pos": 486,
                                              "tag": "QualifiedIdentifier",
                                              "values": Array [
                                                Object {
                                                  "nextPos": 510,
                                                  "pos": 486,
                                                  "tag": "UnquotedIdentifier",
                                                  "value": "installation_export_type",
                                                },
                                              ],
                                            },
                                          ],
                                        },
                                        Object {
                                          "nextPos": 512,
                                          "pos": 510,
                                          "tag": "Dimension",
                                        },
                                      ],
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 552,
                  "pos": 514,
                  "tag": "GroupBy",
                  "values": Array [
                    Object {
                      "nextPos": 534,
                      "pos": 523,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 531,
                          "pos": 523,
                          "tag": "UnquotedIdentifier",
                          "value": "accounts",
                        },
                        Object {
                          "nextPos": 534,
                          "pos": 532,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 552,
                      "pos": 536,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 549,
                          "pos": 536,
                          "tag": "UnquotedIdentifier",
                          "value": "installations",
                        },
                        Object {
                          "nextPos": 552,
                          "pos": 550,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 650,
              "pos": 553,
              "tag": "Conflict",
              "values": Array [
                Object {
                  "nextPos": 611,
                  "pos": 565,
                  "tag": "ConflictTarget",
                  "values": Array [
                    Object {
                      "nextPos": 576,
                      "pos": 566,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 576,
                          "pos": 566,
                          "tag": "UnquotedIdentifier",
                          "value": "account_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 593,
                      "pos": 578,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 593,
                          "pos": 578,
                          "tag": "UnquotedIdentifier",
                          "value": "installation_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 610,
                      "pos": 595,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 610,
                          "pos": 595,
                          "tag": "UnquotedIdentifier",
                          "value": "levelisation_id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 650,
                  "pos": 612,
                  "tag": "DoUpdate",
                  "values": Array [
                    Object {
                      "nextPos": 650,
                      "pos": 622,
                      "tag": "Set",
                      "values": Array [
                        Object {
                          "nextPos": 650,
                          "pos": 628,
                          "tag": "SetList",
                          "values": Array [
                            Object {
                              "nextPos": 650,
                              "pos": 628,
                              "tag": "SetItem",
                              "values": Array [
                                Object {
                                  "nextPos": 633,
                                  "pos": 628,
                                  "tag": "UnquotedIdentifier",
                                  "value": "state",
                                },
                                Object {
                                  "nextPos": 650,
                                  "pos": 636,
                                  "tag": "Column",
                                  "values": Array [
                                    Object {
                                      "nextPos": 644,
                                      "pos": 636,
                                      "tag": "UnquotedIdentifier",
                                      "value": "EXCLUDED",
                                    },
                                    Object {
                                      "nextPos": 650,
                                      "pos": 645,
                                      "tag": "UnquotedIdentifier",
                                      "value": "state",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 665,
              "pos": 651,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 665,
                  "pos": 663,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 665,
                      "pos": 663,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 665,
                          "pos": 663,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "start",
      "nextPos": 416,
      "pick": Array [],
      "pos": 410,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "end_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 406,
          "pos": 391,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 399,
              "pos": 391,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 406,
              "pos": 400,
              "tag": "UnquotedIdentifier",
              "value": "end_on",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 665,
          "pos": 663,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 665,
              "pos": 663,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 36,
        "pos": 15,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 36,
            "pos": 15,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 36,
                "pos": 15,
                "tag": "UnquotedIdentifier",
                "value": "account_levelisations",
              },
            ],
          },
        ],
      },
      "table": "account_levelisations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 229,
        "pos": 221,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 229,
            "pos": 221,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 229,
                "pos": 221,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 244,
        "pos": 235,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 244,
            "pos": 235,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 244,
                "pos": 235,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 306,
        "pos": 293,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 306,
            "pos": 293,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 306,
                "pos": 293,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisations.query.sql: account-levelisations.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 2307,
      "pick": Array [],
      "pos": 2305,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2356,
      "pick": Array [],
      "pos": 2354,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2351,
          "pos": 2317,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2326,
              "pos": 2317,
              "tag": "UnquotedIdentifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 2351,
              "pos": 2327,
              "tag": "UnquotedIdentifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "resolvedPostlev",
      "nextPos": 2382,
      "pick": Array [],
      "pos": 2366,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "resolvedPostlev",
      "nextPos": 2408,
      "pick": Array [],
      "pos": 2392,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "bool",
        "type": "Named",
        "value": Object {
          "type": "Boolean",
        },
      },
    },
    Object {
      "name": "state",
      "nextPos": 2498,
      "pick": Array [],
      "pos": 2492,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "account_levelisation_state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2526,
          "pos": 2500,
          "tag": "Type",
          "values": Array [
            Object {
              "nextPos": 2526,
              "pos": 2500,
              "tag": "QualifiedIdentifier",
              "values": Array [
                Object {
                  "nextPos": 2526,
                  "pos": 2500,
                  "tag": "UnquotedIdentifier",
                  "value": "account_levelisation_state",
                },
              ],
            },
          ],
        },
        "type": "LoadRecord",
      },
    },
    Object {
      "name": "state",
      "nextPos": 2575,
      "pick": Array [],
      "pos": 2569,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2566,
          "pos": 2539,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2560,
              "pos": 2539,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 2566,
              "pos": 2561,
              "tag": "UnquotedIdentifier",
              "value": "state",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "levelisationId",
      "nextPos": 2600,
      "pick": Array [],
      "pos": 2585,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
    Object {
      "name": "levelisationId",
      "nextPos": 2672,
      "pick": Array [],
      "pos": 2657,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "levelisation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2654,
          "pos": 2617,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2638,
              "pos": 2617,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 2654,
              "pos": 2639,
              "tag": "UnquotedIdentifier",
              "value": "levelisation_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 2760,
      "pick": Array [],
      "pos": 2756,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "name": "int4",
          "type": "Named",
          "value": Object {
            "type": "Number",
          },
        },
        "type": "Array",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 2892,
      "pick": Array [],
      "pos": 2882,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "totalPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortOrder",
      "nextPos": 2924,
      "pick": Array [],
      "pos": 2914,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "DESC",
        "type": "String",
      },
    },
    Object {
      "name": "sortOrder",
      "nextPos": 3039,
      "pick": Array [],
      "pos": 3029,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "ASC",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3120,
      "pick": Array [],
      "pos": 3110,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "vatPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3340,
      "pick": Array [],
      "pos": 3330,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "generationPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3588,
      "pick": Array [],
      "pos": 3578,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "exportPayment",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 3820,
      "pick": Array [],
      "pos": 3810,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "generationEnergy",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4064,
      "pick": Array [],
      "pos": 4054,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "exportEnergy",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4292,
      "pick": Array [],
      "pos": 4282,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "cfrFitId",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4510,
      "pick": Array [],
      "pos": 4500,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "state",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4708,
      "pick": Array [],
      "pos": 4698,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "isAccepted",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 4928,
      "pick": Array [],
      "pos": 4918,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "error",
        "type": "String",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 5117,
      "pick": Array [],
      "pos": 5107,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "exportType",
        "type": "String",
      },
    },
    Object {
      "name": "limit",
      "nextPos": 5353,
      "pick": Array [],
      "pos": 5347,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
    Object {
      "name": "offset",
      "nextPos": 5373,
      "pick": Array [],
      "pos": 5366,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 33,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 30,
              "pos": 9,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 33,
              "pos": 31,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "levelisationId",
      "type": Object {
        "column": "levelisation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 82,
          "pos": 45,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 66,
              "pos": 45,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 82,
              "pos": 67,
              "tag": "UnquotedIdentifier",
              "value": "levelisation_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "accountId",
      "type": Object {
        "column": "account_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 138,
          "pos": 106,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 127,
              "pos": 106,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 138,
              "pos": 128,
              "tag": "UnquotedIdentifier",
              "value": "account_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "installationId",
      "type": Object {
        "column": "installation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 194,
          "pos": 157,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 178,
              "pos": 157,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 194,
              "pos": 179,
              "tag": "UnquotedIdentifier",
              "value": "installation_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "state",
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 245,
          "pos": 218,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 239,
              "pos": 218,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 245,
              "pos": 240,
              "tag": "UnquotedIdentifier",
              "value": "state",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isAccepted",
      "type": Object {
        "column": "is_accepted",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 293,
          "pos": 260,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 281,
              "pos": 260,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 293,
              "pos": 282,
              "tag": "UnquotedIdentifier",
              "value": "is_accepted",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationStartReadOn",
      "type": Object {
        "column": "generation_start_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 359,
          "pos": 313,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 334,
              "pos": 313,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 359,
              "pos": 335,
              "tag": "UnquotedIdentifier",
              "value": "generation_start_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationStartReadValue",
      "type": Object {
        "column": "generation_start_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 439,
          "pos": 390,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 411,
              "pos": 390,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 439,
              "pos": 412,
              "tag": "UnquotedIdentifier",
              "value": "generation_start_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationEndReadOn",
      "type": Object {
        "column": "generation_end_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 517,
          "pos": 473,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 494,
              "pos": 473,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 517,
              "pos": 495,
              "tag": "UnquotedIdentifier",
              "value": "generation_end_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationEndReadValue",
      "type": Object {
        "column": "generation_end_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 593,
          "pos": 546,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 567,
              "pos": 546,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 593,
              "pos": 568,
              "tag": "UnquotedIdentifier",
              "value": "generation_end_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationPercentageSplit",
      "type": Object {
        "column": "generation_percentage_split",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 674,
          "pos": 625,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 646,
              "pos": 625,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 674,
              "pos": 647,
              "tag": "UnquotedIdentifier",
              "value": "generation_percentage_split",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationPayment",
      "type": Object {
        "column": "generation_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 749,
          "pos": 709,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 730,
              "pos": 709,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 749,
              "pos": 731,
              "tag": "UnquotedIdentifier",
              "value": "generation_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationEnergy",
      "type": Object {
        "column": "generation_energy",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 815,
          "pos": 776,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 797,
              "pos": 776,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 815,
              "pos": 798,
              "tag": "UnquotedIdentifier",
              "value": "generation_energy",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportStartReadOn",
      "type": Object {
        "column": "export_start_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 883,
          "pos": 841,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 862,
              "pos": 841,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 883,
              "pos": 863,
              "tag": "UnquotedIdentifier",
              "value": "export_start_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportStartReadValue",
      "type": Object {
        "column": "export_start_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 955,
          "pos": 910,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 931,
              "pos": 910,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 955,
              "pos": 932,
              "tag": "UnquotedIdentifier",
              "value": "export_start_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportEndReadOn",
      "type": Object {
        "column": "export_end_read_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1025,
          "pos": 985,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1006,
              "pos": 985,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1025,
              "pos": 1007,
              "tag": "UnquotedIdentifier",
              "value": "export_end_read_on",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportEndReadValue",
      "type": Object {
        "column": "export_end_read_value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1093,
          "pos": 1050,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1071,
              "pos": 1050,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1093,
              "pos": 1072,
              "tag": "UnquotedIdentifier",
              "value": "export_end_read_value",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportPercentageSplit",
      "type": Object {
        "column": "export_percentage_split",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1166,
          "pos": 1121,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1142,
              "pos": 1121,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1166,
              "pos": 1143,
              "tag": "UnquotedIdentifier",
              "value": "export_percentage_split",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportPayment",
      "type": Object {
        "column": "export_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1233,
          "pos": 1197,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1218,
              "pos": 1197,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1233,
              "pos": 1219,
              "tag": "UnquotedIdentifier",
              "value": "export_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportEnergy",
      "type": Object {
        "column": "export_energy",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1291,
          "pos": 1256,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1277,
              "pos": 1256,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1291,
              "pos": 1278,
              "tag": "UnquotedIdentifier",
              "value": "export_energy",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportType",
      "type": Object {
        "column": "export_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1346,
          "pos": 1313,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1334,
              "pos": 1313,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1346,
              "pos": 1335,
              "tag": "UnquotedIdentifier",
              "value": "export_type",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "technologyType",
      "type": Object {
        "column": "technology_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1403,
          "pos": 1366,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1387,
              "pos": 1366,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1403,
              "pos": 1388,
              "tag": "UnquotedIdentifier",
              "value": "technology_type",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "totalPayment",
      "type": Object {
        "column": "total_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1462,
          "pos": 1427,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1448,
              "pos": 1427,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1462,
              "pos": 1449,
              "tag": "UnquotedIdentifier",
              "value": "total_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "vatPayment",
      "type": Object {
        "column": "vat_payment",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1517,
          "pos": 1484,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1505,
              "pos": 1484,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1517,
              "pos": 1506,
              "tag": "UnquotedIdentifier",
              "value": "vat_payment",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "generationPeriods",
      "type": Object {
        "column": "generation_periods",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1577,
          "pos": 1537,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1558,
              "pos": 1537,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1577,
              "pos": 1559,
              "tag": "UnquotedIdentifier",
              "value": "generation_periods",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportPeriods",
      "type": Object {
        "column": "export_periods",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1640,
          "pos": 1604,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1625,
              "pos": 1604,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1640,
              "pos": 1626,
              "tag": "UnquotedIdentifier",
              "value": "export_periods",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "errorCode",
      "type": Object {
        "available": Array [
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "Number",
            },
            Object {
              "type": "String",
            },
          ],
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "String",
            },
            Object {
              "type": "String",
            },
          ],
        ],
        "index": 2,
        "left": Object {
          "column": "payload",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 1677,
            "pos": 1663,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 1669,
                "pos": 1663,
                "tag": "UnquotedIdentifier",
                "value": "issues",
              },
              Object {
                "nextPos": 1677,
                "pos": 1670,
                "tag": "UnquotedIdentifier",
                "value": "payload",
              },
            ],
          },
          "table": "issues",
          "type": "LoadColumn",
        },
        "right": Object {
          "literal": "code",
          "type": "String",
        },
        "sourceTag": Object {
          "nextPos": 1686,
          "pos": 1663,
          "tag": "BinaryExpression",
          "values": Array [
            Object {
              "nextPos": 1677,
              "pos": 1663,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 1669,
                  "pos": 1663,
                  "tag": "UnquotedIdentifier",
                  "value": "issues",
                },
                Object {
                  "nextPos": 1677,
                  "pos": 1670,
                  "tag": "UnquotedIdentifier",
                  "value": "payload",
                },
              ],
            },
            Object {
              "nextPos": 1680,
              "pos": 1677,
              "tag": "BinaryOperator",
              "value": "->>",
            },
            Object {
              "nextPos": 1686,
              "pos": 1680,
              "tag": "String",
              "value": "code",
            },
          ],
        },
        "type": "LoadOperator",
      },
    },
    Object {
      "name": "errorParams",
      "type": Object {
        "available": Array [
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "Number",
            },
            Object {
              "type": "Json",
            },
          ],
          Array [
            Object {
              "type": "Json",
            },
            Object {
              "type": "String",
            },
            Object {
              "type": "Json",
            },
          ],
        ],
        "index": 2,
        "left": Object {
          "column": "payload",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 1719,
            "pos": 1705,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 1711,
                "pos": 1705,
                "tag": "UnquotedIdentifier",
                "value": "issues",
              },
              Object {
                "nextPos": 1719,
                "pos": 1712,
                "tag": "UnquotedIdentifier",
                "value": "payload",
              },
            ],
          },
          "table": "issues",
          "type": "LoadColumn",
        },
        "right": Object {
          "literal": "params",
          "type": "String",
        },
        "sourceTag": Object {
          "nextPos": 1729,
          "pos": 1705,
          "tag": "BinaryExpression",
          "values": Array [
            Object {
              "nextPos": 1719,
              "pos": 1705,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 1711,
                  "pos": 1705,
                  "tag": "UnquotedIdentifier",
                  "value": "issues",
                },
                Object {
                  "nextPos": 1719,
                  "pos": 1712,
                  "tag": "UnquotedIdentifier",
                  "value": "payload",
                },
              ],
            },
            Object {
              "nextPos": 1721,
              "pos": 1719,
              "tag": "BinaryOperator",
              "value": "->",
            },
            Object {
              "nextPos": 1729,
              "pos": 1721,
              "tag": "String",
              "value": "params",
            },
          ],
        },
        "type": "LoadOperator",
      },
    },
    Object {
      "name": "cfrFitId",
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1784,
          "pos": 1750,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1759,
              "pos": 1750,
              "tag": "UnquotedIdentifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 1784,
              "pos": 1760,
              "tag": "UnquotedIdentifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "resolvedPostlevId",
      "type": Object {
        "column": "resolved_postlev_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1843,
          "pos": 1802,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1823,
              "pos": 1802,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1843,
              "pos": 1824,
              "tag": "UnquotedIdentifier",
              "value": "resolved_postlev_id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isBacsPaymentsSent",
      "type": Object {
        "column": "is_bacs_payments_sent",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1913,
          "pos": 1870,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1891,
              "pos": 1870,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1913,
              "pos": 1892,
              "tag": "UnquotedIdentifier",
              "value": "is_bacs_payments_sent",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "isChequePaymentsSent",
      "type": Object {
        "column": "is_cheque_payments_sent",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1986,
          "pos": 1941,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1962,
              "pos": 1941,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 1986,
              "pos": 1963,
              "tag": "UnquotedIdentifier",
              "value": "is_cheque_payments_sent",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 2040,
        "pos": 2019,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2040,
            "pos": 2019,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2040,
                "pos": 2019,
                "tag": "UnquotedIdentifier",
                "value": "account_levelisations",
              },
            ],
          },
        ],
      },
      "table": "account_levelisations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "issues",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 2057,
        "pos": 2051,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2057,
            "pos": 2051,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2057,
                "pos": 2051,
                "tag": "UnquotedIdentifier",
                "value": "issues",
              },
            ],
          },
        ],
      },
      "table": "issues",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 2214,
        "pos": 2205,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2214,
            "pos": 2205,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2214,
                "pos": 2205,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisations-bulk-close-accounts.query.sql: account-levelisations-bulk-close-accounts.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "ids",
      "nextPos": 198,
      "pick": Array [],
      "pos": 194,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "name": "int4",
          "type": "Named",
          "value": Object {
            "type": "Number",
          },
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 415,
          "pos": 391,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 412,
              "pos": 391,
              "tag": "UnquotedIdentifier",
              "value": "account_levelisations",
            },
            Object {
              "nextPos": 415,
              "pos": 413,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 15,
        "pos": 7,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 15,
            "pos": 7,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 15,
                "pos": 7,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 63,
        "pos": 42,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 63,
            "pos": 42,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 63,
                "pos": 42,
                "tag": "UnquotedIdentifier",
                "value": "account_levelisations",
              },
            ],
          },
        ],
      },
      "table": "account_levelisations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql account-levelisations-set-bulk-update.query.sql: account-levelisations-set-bulk-update.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "ids",
      "nextPos": 533,
      "pick": Array [],
      "pos": 529,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "name": "int4",
          "type": "Named",
          "value": Object {
            "type": "Number",
          },
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 577,
          "pos": 575,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 577,
              "pos": 575,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "account_levelisations",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "account_levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 28,
        "pos": 7,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 28,
            "pos": 7,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 28,
                "pos": 7,
                "tag": "UnquotedIdentifier",
                "value": "account_levelisations",
              },
            ],
          },
        ],
      },
      "table": "account_levelisations",
      "type": "Table",
    },
    Object {
      "isResult": false,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 118,
        "pos": 110,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 118,
            "pos": 110,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 118,
                "pos": 110,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": false,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 348,
        "pos": 340,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 348,
            "pos": 340,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 348,
                "pos": 340,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql accounts.list.query.sql: accounts.list.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 740,
      "pick": Array [],
      "pos": 738,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 855,
      "pick": Array [],
      "pos": 853,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 855,
          "pick": Array [],
          "pos": 853,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 962,
      "pick": Array [],
      "pos": 960,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 962,
          "pick": Array [],
          "pos": 960,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1134,
      "pick": Array [],
      "pos": 1132,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1134,
          "pick": Array [],
          "pos": 1132,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1301,
      "pick": Array [],
      "pos": 1299,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1301,
          "pick": Array [],
          "pos": 1299,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1540,
      "pick": Array [],
      "pos": 1538,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1540,
          "pick": Array [],
          "pos": 1538,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1616,
      "pick": Array [],
      "pos": 1614,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "id",
        "type": "Named",
        "value": Object {
          "name": "varchar",
          "type": "Named",
          "value": Object {
            "type": "String",
          },
        },
      },
    },
    Object {
      "name": "q",
      "nextPos": 1654,
      "pick": Array [],
      "pos": 1652,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "supply_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1649,
          "pos": 1624,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1637,
              "pos": 1624,
              "tag": "UnquotedIdentifier",
              "value": "installations",
            },
            Object {
              "nextPos": 1649,
              "pos": 1638,
              "tag": "UnquotedIdentifier",
              "value": "supply_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1692,
      "pick": Array [],
      "pos": 1690,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "export_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1687,
          "pos": 1662,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1675,
              "pos": 1662,
              "tag": "UnquotedIdentifier",
              "value": "installations",
            },
            Object {
              "nextPos": 1687,
              "pos": 1676,
              "tag": "UnquotedIdentifier",
              "value": "export_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1727,
      "pick": Array [],
      "pos": 1725,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "generator_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1722,
          "pos": 1700,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1709,
              "pos": 1700,
              "tag": "UnquotedIdentifier",
              "value": "customers",
            },
            Object {
              "nextPos": 1722,
              "pos": 1710,
              "tag": "UnquotedIdentifier",
              "value": "generator_id",
            },
          ],
        },
        "table": "customers",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1775,
      "pick": Array [],
      "pos": 1773,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "beneficiary_account_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1770,
          "pos": 1735,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1743,
              "pos": 1735,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 1770,
              "pos": 1744,
              "tag": "UnquotedIdentifier",
              "value": "beneficiary_account_number",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1822,
      "pick": Array [],
      "pos": 1820,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1817,
          "pos": 1783,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1792,
              "pos": 1783,
              "tag": "UnquotedIdentifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 1817,
              "pos": 1793,
              "tag": "UnquotedIdentifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 1914,
      "pick": Array [],
      "pos": 1910,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "name": "int4",
          "type": "Named",
          "value": Object {
            "type": "Number",
          },
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "total",
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 62,
        "pos": 54,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 62,
            "pos": 54,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 62,
                "pos": 54,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 133,
        "pos": 124,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 133,
            "pos": 124,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 133,
                "pos": 124,
                "tag": "UnquotedIdentifier",
                "value": "customers",
              },
            ],
          },
        ],
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 186,
        "pos": 178,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 186,
            "pos": 178,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 186,
                "pos": 178,
                "tag": "UnquotedIdentifier",
                "value": "contacts",
              },
            ],
          },
        ],
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 247,
        "pos": 238,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 247,
            "pos": 238,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 247,
                "pos": 238,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 300,
        "pos": 291,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 300,
            "pos": 291,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 300,
                "pos": 291,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 357,
        "pos": 344,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 357,
            "pos": 344,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 357,
                "pos": 344,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_addresses",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 446,
        "pos": 411,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 420,
            "pos": 411,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 420,
                "pos": 411,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
          Object {
            "nextPos": 446,
            "pos": 421,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 446,
                "pos": 424,
                "tag": "UnquotedIdentifier",
                "value": "installation_addresses",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql accounts.query.sql: accounts.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 1194,
      "pick": Array [],
      "pos": 1192,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1317,
      "pick": Array [],
      "pos": 1315,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1317,
          "pick": Array [],
          "pos": 1315,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1497,
      "pick": Array [],
      "pos": 1495,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1497,
          "pick": Array [],
          "pos": 1495,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1672,
      "pick": Array [],
      "pos": 1670,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1672,
          "pick": Array [],
          "pos": 1670,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1919,
      "pick": Array [],
      "pos": 1917,
      "required": false,
      "spread": false,
      "type": Object {
        "args": Array [
          Object {
            "literal": "english",
            "type": "String",
          },
          Object {
            "type": "Any",
          },
        ],
        "index": 1,
        "name": "plainto_tsquery",
        "sourceTag": Object {
          "nextPos": 1919,
          "pick": Array [],
          "pos": 1917,
          "required": false,
          "tag": "Parameter",
          "type": "single",
          "value": "q",
        },
        "type": "LoadFunctionArgument",
      },
    },
    Object {
      "name": "q",
      "nextPos": 1999,
      "pick": Array [],
      "pos": 1997,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "id",
        "type": "Named",
        "value": Object {
          "name": "varchar",
          "type": "Named",
          "value": Object {
            "type": "String",
          },
        },
      },
    },
    Object {
      "name": "q",
      "nextPos": 2039,
      "pick": Array [],
      "pos": 2037,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "supply_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2034,
          "pos": 2009,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2022,
              "pos": 2009,
              "tag": "UnquotedIdentifier",
              "value": "installations",
            },
            Object {
              "nextPos": 2034,
              "pos": 2023,
              "tag": "UnquotedIdentifier",
              "value": "supply_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2079,
      "pick": Array [],
      "pos": 2077,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "export_mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2074,
          "pos": 2049,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2062,
              "pos": 2049,
              "tag": "UnquotedIdentifier",
              "value": "installations",
            },
            Object {
              "nextPos": 2074,
              "pos": 2063,
              "tag": "UnquotedIdentifier",
              "value": "export_mpan",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2129,
      "pick": Array [],
      "pos": 2127,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "beneficiary_account_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2124,
          "pos": 2089,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2097,
              "pos": 2089,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 2124,
              "pos": 2098,
              "tag": "UnquotedIdentifier",
              "value": "beneficiary_account_number",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "q",
      "nextPos": 2178,
      "pick": Array [],
      "pos": 2176,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_account_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 2173,
          "pos": 2139,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 2148,
              "pos": 2139,
              "tag": "UnquotedIdentifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 2173,
              "pos": 2149,
              "tag": "UnquotedIdentifier",
              "value": "scheme_account_reference",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 2276,
      "pick": Array [],
      "pos": 2272,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "name": "int4",
          "type": "Named",
          "value": Object {
            "type": "Number",
          },
        },
        "type": "Array",
      },
    },
    Object {
      "name": "limit",
      "nextPos": 2634,
      "pick": Array [],
      "pos": 2628,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
    Object {
      "name": "offset",
      "nextPos": 2654,
      "pick": Array [],
      "pos": 2647,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 50,
          "pos": 39,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 47,
              "pos": 39,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 50,
              "pos": 48,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "state",
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 70,
          "pos": 56,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 64,
              "pos": 56,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 70,
              "pos": 65,
              "tag": "UnquotedIdentifier",
              "value": "state",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "startOn",
      "type": Object {
        "column": "start_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 93,
          "pos": 76,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 84,
              "pos": 76,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 93,
              "pos": 85,
              "tag": "UnquotedIdentifier",
              "value": "start_on",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "firstName",
      "type": Object {
        "column": "first_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 131,
          "pos": 112,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 120,
              "pos": 112,
              "tag": "UnquotedIdentifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 131,
              "pos": 121,
              "tag": "UnquotedIdentifier",
              "value": "first_name",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "lastName",
      "type": Object {
        "column": "last_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 170,
          "pos": 152,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 160,
              "pos": 152,
              "tag": "UnquotedIdentifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 170,
              "pos": 161,
              "tag": "UnquotedIdentifier",
              "value": "last_name",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "email",
      "type": Object {
        "column": "email",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 204,
          "pos": 190,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 198,
              "pos": 190,
              "tag": "UnquotedIdentifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 204,
              "pos": 199,
              "tag": "UnquotedIdentifier",
              "value": "email",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "address",
      "type": Object {
        "args": Array [
          Object {
            "literal": " ",
            "type": "String",
          },
          Object {
            "column": "address_line_1",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 275,
              "pos": 238,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 260,
                  "pos": 238,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 275,
                  "pos": 261,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_1",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
          Object {
            "column": "address_line_2",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 320,
              "pos": 283,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 305,
                  "pos": 283,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 320,
                  "pos": 306,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_2",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
          Object {
            "column": "city",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 355,
              "pos": 328,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 350,
                  "pos": 328,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 355,
                  "pos": 351,
                  "tag": "UnquotedIdentifier",
                  "value": "city",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
          Object {
            "column": "postcode",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 394,
              "pos": 363,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 385,
                  "pos": 363,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 394,
                  "pos": 386,
                  "tag": "UnquotedIdentifier",
                  "value": "postcode",
                },
              ],
            },
            "table": "installation_addresses",
            "type": "LoadColumn",
          },
        ],
        "name": "concat_ws",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 400,
          "pos": 210,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 219,
              "pos": 210,
              "tag": "QualifiedIdentifier",
              "values": Array [
                Object {
                  "nextPos": 219,
                  "pos": 210,
                  "tag": "UnquotedIdentifier",
                  "value": "CONCAT_WS",
                },
              ],
            },
            Object {
              "nextPos": 230,
              "pos": 227,
              "tag": "String",
              "value": " ",
            },
            Object {
              "nextPos": 275,
              "pos": 238,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 260,
                  "pos": 238,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 275,
                  "pos": 261,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_1",
                },
              ],
            },
            Object {
              "nextPos": 320,
              "pos": 283,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 305,
                  "pos": 283,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 320,
                  "pos": 306,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_2",
                },
              ],
            },
            Object {
              "nextPos": 355,
              "pos": 328,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 350,
                  "pos": 328,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 355,
                  "pos": 351,
                  "tag": "UnquotedIdentifier",
                  "value": "city",
                },
              ],
            },
            Object {
              "nextPos": 394,
              "pos": 363,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 385,
                  "pos": 363,
                  "tag": "UnquotedIdentifier",
                  "value": "installation_addresses",
                },
                Object {
                  "nextPos": 394,
                  "pos": 386,
                  "tag": "UnquotedIdentifier",
                  "value": "postcode",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "fitIds",
      "type": Object {
        "items": Object {
          "column": "scheme_account_reference",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 463,
            "pos": 429,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 438,
                "pos": 429,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
              Object {
                "nextPos": 463,
                "pos": 439,
                "tag": "UnquotedIdentifier",
                "value": "scheme_account_reference",
              },
            ],
          },
          "table": "contracts",
          "type": "LoadColumn",
        },
        "type": "ToArray",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 492,
        "pos": 484,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 492,
            "pos": 484,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 492,
                "pos": 484,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 567,
        "pos": 558,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 567,
            "pos": 558,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 567,
                "pos": 558,
                "tag": "UnquotedIdentifier",
                "value": "customers",
              },
            ],
          },
        ],
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 622,
        "pos": 614,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 622,
            "pos": 614,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 622,
                "pos": 614,
                "tag": "UnquotedIdentifier",
                "value": "contacts",
              },
            ],
          },
        ],
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 685,
        "pos": 676,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 685,
            "pos": 676,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 685,
                "pos": 676,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 740,
        "pos": 731,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 740,
            "pos": 731,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 740,
                "pos": 731,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 799,
        "pos": 786,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 799,
            "pos": 786,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 799,
                "pos": 786,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_addresses",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 890,
        "pos": 855,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 864,
            "pos": 855,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 864,
                "pos": 855,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
          Object {
            "nextPos": 890,
            "pos": 865,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 890,
                "pos": 868,
                "tag": "UnquotedIdentifier",
                "value": "installation_addresses",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql accounts.sql: accounts.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 20,
        "pos": 12,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 20,
            "pos": 12,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 20,
                "pos": 12,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 289,
        "pos": 280,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 289,
            "pos": 280,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 289,
                "pos": 280,
                "tag": "UnquotedIdentifier",
                "value": "customers",
              },
            ],
          },
        ],
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mr",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1182,
        "pos": 1163,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1179,
            "pos": 1163,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1166,
                "pos": 1163,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1179,
                "pos": 1167,
                "tag": "UnquotedIdentifier",
                "value": "MeterReading",
              },
            ],
          },
          Object {
            "nextPos": 1182,
            "pos": 1180,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1182,
                "pos": 1180,
                "tag": "UnquotedIdentifier",
                "value": "mr",
              },
            ],
          },
        ],
      },
      "table": "MeterReading",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mr",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1432,
        "pos": 1413,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1429,
            "pos": 1413,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1416,
                "pos": 1413,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1429,
                "pos": 1417,
                "tag": "UnquotedIdentifier",
                "value": "MeterReading",
              },
            ],
          },
          Object {
            "nextPos": 1432,
            "pos": 1430,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1432,
                "pos": 1430,
                "tag": "UnquotedIdentifier",
                "value": "mr",
              },
            ],
          },
        ],
      },
      "table": "MeterReading",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mr",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1883,
        "pos": 1864,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1880,
            "pos": 1864,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1867,
                "pos": 1864,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1880,
                "pos": 1868,
                "tag": "UnquotedIdentifier",
                "value": "MeterReading",
              },
            ],
          },
          Object {
            "nextPos": 1883,
            "pos": 1881,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1883,
                "pos": 1881,
                "tag": "UnquotedIdentifier",
                "value": "mr",
              },
            ],
          },
        ],
      },
      "table": "MeterReading",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mr",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2199,
        "pos": 2180,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2196,
            "pos": 2180,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2183,
                "pos": 2180,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2196,
                "pos": 2184,
                "tag": "UnquotedIdentifier",
                "value": "MeterReading",
              },
            ],
          },
          Object {
            "nextPos": 2199,
            "pos": 2197,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2199,
                "pos": 2197,
                "tag": "UnquotedIdentifier",
                "value": "mr",
              },
            ],
          },
        ],
      },
      "table": "MeterReading",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ca",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2457,
        "pos": 2435,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2454,
            "pos": 2435,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2438,
                "pos": 2435,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2454,
                "pos": 2439,
                "tag": "UnquotedIdentifier",
                "value": "CustomerAccount",
              },
            ],
          },
          Object {
            "nextPos": 2457,
            "pos": 2455,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2457,
                "pos": 2455,
                "tag": "UnquotedIdentifier",
                "value": "ca",
              },
            ],
          },
        ],
      },
      "table": "CustomerAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2482,
        "pos": 2468,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2480,
            "pos": 2468,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2471,
                "pos": 2468,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2480,
                "pos": 2472,
                "tag": "UnquotedIdentifier",
                "value": "Customer",
              },
            ],
          },
          Object {
            "nextPos": 2482,
            "pos": 2481,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2482,
                "pos": 2481,
                "tag": "UnquotedIdentifier",
                "value": "c",
              },
            ],
          },
        ],
      },
      "table": "Customer",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "fa",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2546,
        "pos": 2529,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2543,
            "pos": 2529,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2532,
                "pos": 2529,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2543,
                "pos": 2533,
                "tag": "UnquotedIdentifier",
                "value": "FiTAccount",
              },
            ],
          },
          Object {
            "nextPos": 2546,
            "pos": 2544,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2546,
                "pos": 2544,
                "tag": "UnquotedIdentifier",
                "value": "fa",
              },
            ],
          },
        ],
      },
      "table": "FiTAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ga",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2622,
        "pos": 2598,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2619,
            "pos": 2598,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2601,
                "pos": 2598,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2619,
                "pos": 2602,
                "tag": "UnquotedIdentifier",
                "value": "GenerationAccount",
              },
            ],
          },
          Object {
            "nextPos": 2622,
            "pos": 2620,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2622,
                "pos": 2620,
                "tag": "UnquotedIdentifier",
                "value": "ga",
              },
            ],
          },
        ],
      },
      "table": "GenerationAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gai",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2711,
        "pos": 2674,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2707,
            "pos": 2674,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2677,
                "pos": 2674,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2707,
                "pos": 2678,
                "tag": "UnquotedIdentifier",
                "value": "GenerationAccountInstallation",
              },
            ],
          },
          Object {
            "nextPos": 2711,
            "pos": 2708,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2711,
                "pos": 2708,
                "tag": "UnquotedIdentifier",
                "value": "gai",
              },
            ],
          },
        ],
      },
      "table": "GenerationAccountInstallation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2802,
        "pos": 2778,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2799,
            "pos": 2778,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2781,
                "pos": 2778,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2799,
                "pos": 2782,
                "tag": "UnquotedIdentifier",
                "value": "InstallationMeter",
              },
            ],
          },
          Object {
            "nextPos": 2802,
            "pos": 2800,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2802,
                "pos": 2800,
                "tag": "UnquotedIdentifier",
                "value": "im",
              },
            ],
          },
        ],
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ba",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2877,
        "pos": 2859,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2874,
            "pos": 2859,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2862,
                "pos": 2859,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2874,
                "pos": 2863,
                "tag": "UnquotedIdentifier",
                "value": "BankAccount",
              },
            ],
          },
          Object {
            "nextPos": 2877,
            "pos": 2875,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2877,
                "pos": 2875,
                "tag": "UnquotedIdentifier",
                "value": "ba",
              },
            ],
          },
        ],
      },
      "table": "BankAccount",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql active-meters-wth-reads.query.sql: active-meters-wth-reads.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "intervalStart",
      "nextPos": 680,
      "pick": Array [],
      "pos": 665,
      "required": true,
      "spread": false,
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 656,
          "pos": 635,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 648,
              "pos": 635,
              "tag": "UnquotedIdentifier",
              "value": "current_reads",
            },
            Object {
              "nextPos": 656,
              "pos": 649,
              "tag": "UnquotedIdentifier",
              "value": "date_on",
            },
          ],
        },
        "table": "current_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "intervalEnd",
      "nextPos": 698,
      "pick": Array [],
      "pos": 685,
      "required": true,
      "spread": false,
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 656,
          "pos": 635,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 648,
              "pos": 635,
              "tag": "UnquotedIdentifier",
              "value": "current_reads",
            },
            Object {
              "nextPos": 656,
              "pos": 649,
              "tag": "UnquotedIdentifier",
              "value": "date_on",
            },
          ],
        },
        "table": "current_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "intervalStart",
      "nextPos": 1290,
      "pick": Array [],
      "pos": 1275,
      "required": true,
      "spread": false,
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1272,
          "pos": 1250,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1264,
              "pos": 1250,
              "tag": "UnquotedIdentifier",
              "value": "previous_reads",
            },
            Object {
              "nextPos": 1272,
              "pos": 1265,
              "tag": "UnquotedIdentifier",
              "value": "date_on",
            },
          ],
        },
        "table": "previous_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "accountId",
      "nextPos": 1620,
      "pick": Array [],
      "pos": 1609,
      "required": true,
      "spread": false,
      "type": Object {
        "column": "account_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1606,
          "pos": 1586,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1595,
              "pos": 1586,
              "tag": "UnquotedIdentifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 1606,
              "pos": 1596,
              "tag": "UnquotedIdentifier",
              "value": "account_id",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "meterId",
      "nextPos": 1636,
      "pick": Array [],
      "pos": 1628,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
    Object {
      "name": "meterId",
      "nextPos": 1673,
      "pick": Array [],
      "pos": 1665,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 1662,
          "pos": 1653,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 1659,
              "pos": 1653,
              "tag": "UnquotedIdentifier",
              "value": "meters",
            },
            Object {
              "nextPos": 1662,
              "pos": 1660,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "meters",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 52,
          "pos": 43,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 49,
              "pos": 43,
              "tag": "UnquotedIdentifier",
              "value": "meters",
            },
            Object {
              "nextPos": 52,
              "pos": 50,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "msn",
      "type": Object {
        "column": "serial_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 76,
          "pos": 56,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 62,
              "pos": 56,
              "tag": "UnquotedIdentifier",
              "value": "meters",
            },
            Object {
              "nextPos": 76,
              "pos": 63,
              "tag": "UnquotedIdentifier",
              "value": "serial_number",
            },
          ],
        },
        "table": "meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "mpan",
      "type": Object {
        "column": "mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 100,
          "pos": 89,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 95,
              "pos": 89,
              "tag": "UnquotedIdentifier",
              "value": "meters",
            },
            Object {
              "nextPos": 100,
              "pos": 96,
              "tag": "UnquotedIdentifier",
              "value": "mpan",
            },
          ],
        },
        "table": "meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "make",
      "type": Object {
        "column": "make",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 115,
          "pos": 104,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 110,
              "pos": 104,
              "tag": "UnquotedIdentifier",
              "value": "meters",
            },
            Object {
              "nextPos": 115,
              "pos": 111,
              "tag": "UnquotedIdentifier",
              "value": "make",
            },
          ],
        },
        "table": "meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "model",
      "type": Object {
        "column": "model",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 131,
          "pos": 119,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 125,
              "pos": 119,
              "tag": "UnquotedIdentifier",
              "value": "meters",
            },
            Object {
              "nextPos": 131,
              "pos": 126,
              "tag": "UnquotedIdentifier",
              "value": "model",
            },
          ],
        },
        "table": "meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "type",
      "type": Object {
        "column": "meter_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 165,
          "pos": 135,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 154,
              "pos": 135,
              "tag": "UnquotedIdentifier",
              "value": "installation_meters",
            },
            Object {
              "nextPos": 165,
              "pos": 155,
              "tag": "UnquotedIdentifier",
              "value": "meter_type",
            },
          ],
        },
        "table": "installation_meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "currentPeriodRead",
      "type": Object {
        "nullable": true,
        "type": "Optional",
        "value": Object {
          "items": Array [
            Object {
              "name": "id",
              "type": Object {
                "column": "id",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 247,
                  "pos": 231,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 244,
                      "pos": 231,
                      "tag": "UnquotedIdentifier",
                      "value": "current_reads",
                    },
                    Object {
                      "nextPos": 247,
                      "pos": 245,
                      "tag": "UnquotedIdentifier",
                      "value": "id",
                    },
                  ],
                },
                "table": "current_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "value",
              "type": Object {
                "column": "value",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 285,
                  "pos": 266,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 279,
                      "pos": 266,
                      "tag": "UnquotedIdentifier",
                      "value": "current_reads",
                    },
                    Object {
                      "nextPos": 285,
                      "pos": 280,
                      "tag": "UnquotedIdentifier",
                      "value": "value",
                    },
                  ],
                },
                "table": "current_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "dateOn",
              "type": Object {
                "column": "date_on",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 326,
                  "pos": 305,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 318,
                      "pos": 305,
                      "tag": "UnquotedIdentifier",
                      "value": "current_reads",
                    },
                    Object {
                      "nextPos": 326,
                      "pos": 319,
                      "tag": "UnquotedIdentifier",
                      "value": "date_on",
                    },
                  ],
                },
                "table": "current_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "submittedAt",
              "type": Object {
                "column": "submitted_at",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 377,
                  "pos": 351,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 364,
                      "pos": 351,
                      "tag": "UnquotedIdentifier",
                      "value": "current_reads",
                    },
                    Object {
                      "nextPos": 377,
                      "pos": 365,
                      "tag": "UnquotedIdentifier",
                      "value": "submitted_at",
                    },
                  ],
                },
                "table": "current_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "reason",
              "type": Object {
                "column": "reason",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 417,
                  "pos": 397,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 410,
                      "pos": 397,
                      "tag": "UnquotedIdentifier",
                      "value": "current_reads",
                    },
                    Object {
                      "nextPos": 417,
                      "pos": 411,
                      "tag": "UnquotedIdentifier",
                      "value": "reason",
                    },
                  ],
                },
                "table": "current_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "type",
              "type": Object {
                "column": "type",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 453,
                  "pos": 435,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 448,
                      "pos": 435,
                      "tag": "UnquotedIdentifier",
                      "value": "current_reads",
                    },
                    Object {
                      "nextPos": 453,
                      "pos": 449,
                      "tag": "UnquotedIdentifier",
                      "value": "type",
                    },
                  ],
                },
                "table": "current_reads",
                "type": "LoadColumn",
              },
            },
          ],
          "type": "ObjectLiteral",
        },
      },
    },
    Object {
      "name": "previousPeriodRead",
      "type": Object {
        "nullable": true,
        "type": "Optional",
        "value": Object {
          "items": Array [
            Object {
              "name": "id",
              "type": Object {
                "column": "id",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 854,
                  "pos": 837,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 851,
                      "pos": 837,
                      "tag": "UnquotedIdentifier",
                      "value": "previous_reads",
                    },
                    Object {
                      "nextPos": 854,
                      "pos": 852,
                      "tag": "UnquotedIdentifier",
                      "value": "id",
                    },
                  ],
                },
                "table": "previous_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "value",
              "type": Object {
                "column": "value",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 893,
                  "pos": 873,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 887,
                      "pos": 873,
                      "tag": "UnquotedIdentifier",
                      "value": "previous_reads",
                    },
                    Object {
                      "nextPos": 893,
                      "pos": 888,
                      "tag": "UnquotedIdentifier",
                      "value": "value",
                    },
                  ],
                },
                "table": "previous_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "dateOn",
              "type": Object {
                "column": "date_on",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 935,
                  "pos": 913,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 927,
                      "pos": 913,
                      "tag": "UnquotedIdentifier",
                      "value": "previous_reads",
                    },
                    Object {
                      "nextPos": 935,
                      "pos": 928,
                      "tag": "UnquotedIdentifier",
                      "value": "date_on",
                    },
                  ],
                },
                "table": "previous_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "submittedAt",
              "type": Object {
                "column": "submitted_at",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 987,
                  "pos": 960,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 974,
                      "pos": 960,
                      "tag": "UnquotedIdentifier",
                      "value": "previous_reads",
                    },
                    Object {
                      "nextPos": 987,
                      "pos": 975,
                      "tag": "UnquotedIdentifier",
                      "value": "submitted_at",
                    },
                  ],
                },
                "table": "previous_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "reason",
              "type": Object {
                "column": "reason",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 1028,
                  "pos": 1007,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 1021,
                      "pos": 1007,
                      "tag": "UnquotedIdentifier",
                      "value": "previous_reads",
                    },
                    Object {
                      "nextPos": 1028,
                      "pos": 1022,
                      "tag": "UnquotedIdentifier",
                      "value": "reason",
                    },
                  ],
                },
                "table": "previous_reads",
                "type": "LoadColumn",
              },
            },
            Object {
              "name": "type",
              "type": Object {
                "column": "type",
                "schema": undefined,
                "sourceTag": Object {
                  "nextPos": 1065,
                  "pos": 1046,
                  "tag": "Column",
                  "values": Array [
                    Object {
                      "nextPos": 1060,
                      "pos": 1046,
                      "tag": "UnquotedIdentifier",
                      "value": "previous_reads",
                    },
                    Object {
                      "nextPos": 1065,
                      "pos": 1061,
                      "tag": "UnquotedIdentifier",
                      "value": "type",
                    },
                  ],
                },
                "table": "previous_reads",
                "type": "LoadColumn",
              },
            },
          ],
          "type": "ObjectLiteral",
        },
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "current_reads",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 512,
        "pos": 483,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 495,
            "pos": 483,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 495,
                "pos": 483,
                "tag": "UnquotedIdentifier",
                "value": "active_reads",
              },
            ],
          },
          Object {
            "nextPos": 512,
            "pos": 496,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 512,
                "pos": 499,
                "tag": "UnquotedIdentifier",
                "value": "current_reads",
              },
            ],
          },
        ],
      },
      "table": "active_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "previous_reads",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 1125,
        "pos": 1095,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1107,
            "pos": 1095,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1107,
                "pos": 1095,
                "tag": "UnquotedIdentifier",
                "value": "active_reads",
              },
            ],
          },
          Object {
            "nextPos": 1125,
            "pos": 1108,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1125,
                "pos": 1111,
                "tag": "UnquotedIdentifier",
                "value": "previous_reads",
              },
            ],
          },
        ],
      },
      "table": "active_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "meters",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 1387,
        "pos": 1381,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1387,
            "pos": 1381,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1387,
                "pos": 1381,
                "tag": "UnquotedIdentifier",
                "value": "meters",
              },
            ],
          },
        ],
      },
      "table": "meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_meters",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 1412,
        "pos": 1393,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1412,
            "pos": 1393,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1412,
                "pos": 1393,
                "tag": "UnquotedIdentifier",
                "value": "installation_meters",
              },
            ],
          },
        ],
      },
      "table": "installation_meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 1471,
        "pos": 1462,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1471,
            "pos": 1462,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1471,
                "pos": 1462,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql bacs.query.sql: bacs.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "quarter",
      "nextPos": 619,
      "pick": Array [],
      "pos": 611,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "levelisation_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 608,
          "pos": 584,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 585,
              "pos": 584,
              "tag": "UnquotedIdentifier",
              "value": "p",
            },
            Object {
              "nextPos": 608,
              "pos": 586,
              "tag": "UnquotedIdentifier",
              "value": "levelisation_reference",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "perPage",
      "nextPos": 634,
      "pick": Array [],
      "pos": 626,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
    Object {
      "name": "offset",
      "nextPos": 649,
      "pick": Array [],
      "pos": 642,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "fitId",
      "type": Object {
        "column": "fit_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 24,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 10,
              "pos": 9,
              "tag": "UnquotedIdentifier",
              "value": "p",
            },
            Object {
              "nextPos": 24,
              "pos": 11,
              "tag": "UnquotedIdentifier",
              "value": "fit_reference",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "name",
      "type": Object {
        "column": "beneficiary_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 54,
          "pos": 36,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 37,
              "pos": 36,
              "tag": "UnquotedIdentifier",
              "value": "a",
            },
            Object {
              "nextPos": 54,
              "pos": 38,
              "tag": "UnquotedIdentifier",
              "value": "beneficiary_name",
            },
          ],
        },
        "table": "a",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "amount",
      "type": Object {
        "column": "amount",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 73,
          "pos": 65,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 66,
              "pos": 65,
              "tag": "UnquotedIdentifier",
              "value": "p",
            },
            Object {
              "nextPos": 73,
              "pos": 67,
              "tag": "UnquotedIdentifier",
              "value": "amount",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "quarter",
      "type": Object {
        "column": "levelisation_reference",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 110,
          "pos": 86,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 87,
              "pos": 86,
              "tag": "UnquotedIdentifier",
              "value": "p",
            },
            Object {
              "nextPos": 110,
              "pos": 88,
              "tag": "UnquotedIdentifier",
              "value": "levelisation_reference",
            },
          ],
        },
        "table": "p",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "bankDetails",
      "type": Object {
        "args": Array [
          Object {
            "column": "beneficiary_sort_code",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 154,
              "pos": 131,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 132,
                  "pos": 131,
                  "tag": "UnquotedIdentifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 154,
                  "pos": 133,
                  "tag": "UnquotedIdentifier",
                  "value": "beneficiary_sort_code",
                },
              ],
            },
            "table": "a",
            "type": "LoadColumn",
          },
          Object {
            "column": "beneficiary_account_number",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 184,
              "pos": 156,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 157,
                  "pos": 156,
                  "tag": "UnquotedIdentifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 184,
                  "pos": 158,
                  "tag": "UnquotedIdentifier",
                  "value": "beneficiary_account_number",
                },
              ],
            },
            "table": "a",
            "type": "LoadColumn",
          },
        ],
        "name": "concat",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 185,
          "pos": 124,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 130,
              "pos": 124,
              "tag": "QualifiedIdentifier",
              "values": Array [
                Object {
                  "nextPos": 130,
                  "pos": 124,
                  "tag": "UnquotedIdentifier",
                  "value": "CONCAT",
                },
              ],
            },
            Object {
              "nextPos": 154,
              "pos": 131,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 132,
                  "pos": 131,
                  "tag": "UnquotedIdentifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 154,
                  "pos": 133,
                  "tag": "UnquotedIdentifier",
                  "value": "beneficiary_sort_code",
                },
              ],
            },
            Object {
              "nextPos": 184,
              "pos": 156,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 157,
                  "pos": 156,
                  "tag": "UnquotedIdentifier",
                  "value": "a",
                },
                Object {
                  "nextPos": 184,
                  "pos": 158,
                  "tag": "UnquotedIdentifier",
                  "value": "beneficiary_account_number",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "addressLine1",
      "type": Object {
        "column": "address_line_1",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 223,
          "pos": 206,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 208,
              "pos": 206,
              "tag": "UnquotedIdentifier",
              "value": "a2",
            },
            Object {
              "nextPos": 223,
              "pos": 209,
              "tag": "UnquotedIdentifier",
              "value": "address_line_1",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "addressLine2",
      "type": Object {
        "column": "address_line_2",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 259,
          "pos": 242,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 244,
              "pos": 242,
              "tag": "UnquotedIdentifier",
              "value": "a2",
            },
            Object {
              "nextPos": 259,
              "pos": 245,
              "tag": "UnquotedIdentifier",
              "value": "address_line_2",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "addressLine3",
      "type": Object {
        "column": "address_line_3",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 295,
          "pos": 278,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 280,
              "pos": 278,
              "tag": "UnquotedIdentifier",
              "value": "a2",
            },
            Object {
              "nextPos": 295,
              "pos": 281,
              "tag": "UnquotedIdentifier",
              "value": "address_line_3",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "postcode",
      "type": Object {
        "column": "postcode",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 325,
          "pos": 314,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 316,
              "pos": 314,
              "tag": "UnquotedIdentifier",
              "value": "a2",
            },
            Object {
              "nextPos": 325,
              "pos": 317,
              "tag": "UnquotedIdentifier",
              "value": "postcode",
            },
          ],
        },
        "table": "a2",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "p",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 352,
        "pos": 342,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 350,
            "pos": 342,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 350,
                "pos": 342,
                "tag": "UnquotedIdentifier",
                "value": "payments",
              },
            ],
          },
          Object {
            "nextPos": 352,
            "pos": 351,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 352,
                "pos": 351,
                "tag": "UnquotedIdentifier",
                "value": "p",
              },
            ],
          },
        ],
      },
      "table": "payments",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "a",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 373,
        "pos": 363,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 371,
            "pos": 363,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 371,
                "pos": 363,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
          Object {
            "nextPos": 373,
            "pos": 372,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 373,
                "pos": 372,
                "tag": "UnquotedIdentifier",
                "value": "a",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c2",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 419,
        "pos": 407,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 416,
            "pos": 407,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 416,
                "pos": 407,
                "tag": "UnquotedIdentifier",
                "value": "customers",
              },
            ],
          },
          Object {
            "nextPos": 419,
            "pos": 417,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 419,
                "pos": 417,
                "tag": "UnquotedIdentifier",
                "value": "c2",
              },
            ],
          },
        ],
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c3",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 466,
        "pos": 455,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 463,
            "pos": 455,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 463,
                "pos": 455,
                "tag": "UnquotedIdentifier",
                "value": "contacts",
              },
            ],
          },
          Object {
            "nextPos": 466,
            "pos": 464,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 466,
                "pos": 464,
                "tag": "UnquotedIdentifier",
                "value": "c3",
              },
            ],
          },
        ],
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "a2",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 522,
        "pos": 510,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 519,
            "pos": 510,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 519,
                "pos": 510,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
          Object {
            "nextPos": 522,
            "pos": 520,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 522,
                "pos": 520,
                "tag": "UnquotedIdentifier",
                "value": "a2",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql contracts.sql: contracts.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 21,
        "pos": 12,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 21,
            "pos": 12,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 21,
                "pos": 12,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 398,
        "pos": 390,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 398,
            "pos": 390,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 398,
                "pos": 390,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 493,
        "pos": 485,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 493,
            "pos": 485,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 493,
                "pos": 485,
                "tag": "UnquotedIdentifier",
                "value": "contacts",
              },
            ],
          },
        ],
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 591,
        "pos": 578,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 591,
            "pos": 578,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 591,
                "pos": 578,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 832,
        "pos": 808,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 829,
            "pos": 808,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 811,
                "pos": 808,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 829,
                "pos": 812,
                "tag": "UnquotedIdentifier",
                "value": "InstallationMeter",
              },
            ],
          },
          Object {
            "nextPos": 832,
            "pos": 830,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 832,
                "pos": 830,
                "tag": "UnquotedIdentifier",
                "value": "im",
              },
            ],
          },
        ],
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 853,
        "pos": 842,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 851,
            "pos": 842,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 845,
                "pos": 842,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 851,
                "pos": 846,
                "tag": "UnquotedIdentifier",
                "value": "Meter",
              },
            ],
          },
          Object {
            "nextPos": 853,
            "pos": 852,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 853,
                "pos": 852,
                "tag": "UnquotedIdentifier",
                "value": "m",
              },
            ],
          },
        ],
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 909,
        "pos": 893,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 906,
            "pos": 893,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 896,
                "pos": 893,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 906,
                "pos": 897,
                "tag": "UnquotedIdentifier",
                "value": "MeterType",
              },
            ],
          },
          Object {
            "nextPos": 909,
            "pos": 907,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 909,
                "pos": 907,
                "tag": "UnquotedIdentifier",
                "value": "mt",
              },
            ],
          },
        ],
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 964,
        "pos": 957,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 964,
            "pos": 957,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 964,
                "pos": 957,
                "tag": "UnquotedIdentifier",
                "value": "tariffs",
              },
            ],
          },
        ],
      },
      "table": "tariffs",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 1317,
        "pos": 1310,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1317,
            "pos": 1310,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1317,
                "pos": 1310,
                "tag": "UnquotedIdentifier",
                "value": "tariffs",
              },
            ],
          },
        ],
      },
      "table": "tariffs",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1639,
        "pos": 1615,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1636,
            "pos": 1615,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1618,
                "pos": 1615,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1636,
                "pos": 1619,
                "tag": "UnquotedIdentifier",
                "value": "InstallationMeter",
              },
            ],
          },
          Object {
            "nextPos": 1639,
            "pos": 1637,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1639,
                "pos": 1637,
                "tag": "UnquotedIdentifier",
                "value": "im",
              },
            ],
          },
        ],
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1660,
        "pos": 1649,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1658,
            "pos": 1649,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1652,
                "pos": 1649,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1658,
                "pos": 1653,
                "tag": "UnquotedIdentifier",
                "value": "Meter",
              },
            ],
          },
          Object {
            "nextPos": 1660,
            "pos": 1659,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1660,
                "pos": 1659,
                "tag": "UnquotedIdentifier",
                "value": "m",
              },
            ],
          },
        ],
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1716,
        "pos": 1700,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1713,
            "pos": 1700,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1703,
                "pos": 1700,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1713,
                "pos": 1704,
                "tag": "UnquotedIdentifier",
                "value": "MeterType",
              },
            ],
          },
          Object {
            "nextPos": 1716,
            "pos": 1714,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1716,
                "pos": 1714,
                "tag": "UnquotedIdentifier",
                "value": "mt",
              },
            ],
          },
        ],
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2166,
        "pos": 2142,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2163,
            "pos": 2142,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2145,
                "pos": 2142,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2163,
                "pos": 2146,
                "tag": "UnquotedIdentifier",
                "value": "InstallationMeter",
              },
            ],
          },
          Object {
            "nextPos": 2166,
            "pos": 2164,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2166,
                "pos": 2164,
                "tag": "UnquotedIdentifier",
                "value": "im",
              },
            ],
          },
        ],
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2187,
        "pos": 2176,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2185,
            "pos": 2176,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2179,
                "pos": 2176,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2185,
                "pos": 2180,
                "tag": "UnquotedIdentifier",
                "value": "Meter",
              },
            ],
          },
          Object {
            "nextPos": 2187,
            "pos": 2186,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2187,
                "pos": 2186,
                "tag": "UnquotedIdentifier",
                "value": "m",
              },
            ],
          },
        ],
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2243,
        "pos": 2227,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2240,
            "pos": 2227,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2230,
                "pos": 2227,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2240,
                "pos": 2231,
                "tag": "UnquotedIdentifier",
                "value": "MeterType",
              },
            ],
          },
          Object {
            "nextPos": 2243,
            "pos": 2241,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2243,
                "pos": 2241,
                "tag": "UnquotedIdentifier",
                "value": "mt",
              },
            ],
          },
        ],
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gai",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2904,
        "pos": 2867,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2900,
            "pos": 2867,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2870,
                "pos": 2867,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2900,
                "pos": 2871,
                "tag": "UnquotedIdentifier",
                "value": "GenerationAccountInstallation",
              },
            ],
          },
          Object {
            "nextPos": 2904,
            "pos": 2901,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2904,
                "pos": 2901,
                "tag": "UnquotedIdentifier",
                "value": "gai",
              },
            ],
          },
        ],
      },
      "table": "GenerationAccountInstallation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ga",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2934,
        "pos": 2910,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2931,
            "pos": 2910,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2913,
                "pos": 2910,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2931,
                "pos": 2914,
                "tag": "UnquotedIdentifier",
                "value": "GenerationAccount",
              },
            ],
          },
          Object {
            "nextPos": 2934,
            "pos": 2932,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2934,
                "pos": 2932,
                "tag": "UnquotedIdentifier",
                "value": "ga",
              },
            ],
          },
        ],
      },
      "table": "GenerationAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "i",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3014,
        "pos": 2996,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3012,
            "pos": 2996,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2999,
                "pos": 2996,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3012,
                "pos": 3000,
                "tag": "UnquotedIdentifier",
                "value": "Installation",
              },
            ],
          },
          Object {
            "nextPos": 3014,
            "pos": 3013,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3014,
                "pos": 3013,
                "tag": "UnquotedIdentifier",
                "value": "i",
              },
            ],
          },
        ],
      },
      "table": "Installation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ca",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3221,
        "pos": 3199,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3218,
            "pos": 3199,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3202,
                "pos": 3199,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3218,
                "pos": 3203,
                "tag": "UnquotedIdentifier",
                "value": "CustomerAccount",
              },
            ],
          },
          Object {
            "nextPos": 3221,
            "pos": 3219,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3221,
                "pos": 3219,
                "tag": "UnquotedIdentifier",
                "value": "ca",
              },
            ],
          },
        ],
      },
      "table": "CustomerAccount",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql delete-accounts.query.sql: delete-accounts.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "type",
      "nextPos": 256,
      "pick": Array [],
      "pos": 251,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "scheme_type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 248,
          "pos": 227,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 236,
              "pos": 227,
              "tag": "UnquotedIdentifier",
              "value": "contracts",
            },
            Object {
              "nextPos": 248,
              "pos": 237,
              "tag": "UnquotedIdentifier",
              "value": "scheme_type",
            },
          ],
        },
        "table": "contracts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "state",
      "nextPos": 290,
      "pick": Array [],
      "pos": 284,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "state",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 281,
          "pos": 267,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 275,
              "pos": 267,
              "tag": "UnquotedIdentifier",
              "value": "accounts",
            },
            Object {
              "nextPos": 281,
              "pos": 276,
              "tag": "UnquotedIdentifier",
              "value": "state",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 305,
          "pos": 303,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 305,
              "pos": 303,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "sourceSystemId",
      "type": Object {
        "column": "source_system_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 325,
          "pos": 309,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 325,
              "pos": 309,
              "tag": "UnquotedIdentifier",
              "value": "source_system_id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "customerId",
      "type": Object {
        "column": "customer_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 360,
          "pos": 349,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 360,
              "pos": 349,
              "tag": "UnquotedIdentifier",
              "value": "customer_id",
            },
          ],
        },
        "table": "accounts",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 20,
        "pos": 12,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 20,
            "pos": 12,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 20,
                "pos": 12,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": false,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 73,
        "pos": 64,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 73,
            "pos": 64,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 73,
                "pos": 64,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": false,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 90,
        "pos": 83,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 90,
            "pos": 83,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 90,
                "pos": 83,
                "tag": "UnquotedIdentifier",
                "value": "tariffs",
              },
            ],
          },
        ],
      },
      "table": "tariffs",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql generation-read-data.query.sql: generation-read-data.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "installationId",
      "nextPos": 220,
      "pick": Array [],
      "pos": 205,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "installation_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 202,
          "pos": 167,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 186,
              "pos": 167,
              "tag": "UnquotedIdentifier",
              "value": "installation_meters",
            },
            Object {
              "nextPos": 202,
              "pos": 187,
              "tag": "UnquotedIdentifier",
              "value": "installation_id",
            },
          ],
        },
        "table": "installation_meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "exportDateOn",
      "nextPos": 442,
      "pick": Array [],
      "pos": 429,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "date",
        "type": "Named",
        "value": Object {
          "type": "Date",
        },
      },
    },
  ],
  "results": Array [
    Object {
      "name": "dateOn",
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 28,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 20,
              "pos": 9,
              "tag": "UnquotedIdentifier",
              "value": "meter_reads",
            },
            Object {
              "nextPos": 28,
              "pos": 21,
              "tag": "UnquotedIdentifier",
              "value": "date_on",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "type": Object {
        "column": "value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 61,
          "pos": 44,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 55,
              "pos": 44,
              "tag": "UnquotedIdentifier",
              "value": "meter_reads",
            },
            Object {
              "nextPos": 61,
              "pos": 56,
              "tag": "UnquotedIdentifier",
              "value": "value",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "meter_reads",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 78,
        "pos": 67,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 78,
            "pos": 67,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 78,
                "pos": 67,
                "tag": "UnquotedIdentifier",
                "value": "meter_reads",
              },
            ],
          },
        ],
      },
      "table": "meter_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "installation_meters",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 103,
        "pos": 84,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 103,
            "pos": 84,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 103,
                "pos": 84,
                "tag": "UnquotedIdentifier",
                "value": "installation_meters",
              },
            ],
          },
        ],
      },
      "table": "installation_meters",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql installation-meter-update.query.sql: installation-meter-update.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "removalDate",
      "nextPos": 52,
      "pick": Array [],
      "pos": 40,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "end_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 37,
          "pos": 31,
          "tag": "UnquotedIdentifier",
          "value": "end_on",
        },
        "table": "installation_meters",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "meterId",
      "nextPos": 97,
      "pick": Array [],
      "pos": 89,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 86,
          "pos": 78,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 86,
              "pos": 78,
              "tag": "UnquotedIdentifier",
              "value": "meter_id",
            },
          ],
        },
        "table": "installation_meters",
        "type": "LoadColumn",
      },
    },
  ],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "installation_meters",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 26,
        "pos": 7,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 26,
            "pos": 7,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 26,
                "pos": 7,
                "tag": "UnquotedIdentifier",
                "value": "installation_meters",
              },
            ],
          },
        ],
      },
      "table": "installation_meters",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql installations.sql: installations.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 25,
        "pos": 12,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 25,
            "pos": 12,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 25,
                "pos": 12,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 691,
        "pos": 682,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 691,
            "pos": 682,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 691,
                "pos": 682,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ivi",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1458,
        "pos": 1422,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1454,
            "pos": 1422,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1425,
                "pos": 1422,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1454,
                "pos": 1426,
                "tag": "UnquotedIdentifier",
                "value": "InstallationVerificationInfo",
              },
            ],
          },
          Object {
            "nextPos": 1458,
            "pos": 1455,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1458,
                "pos": 1455,
                "tag": "UnquotedIdentifier",
                "value": "ivi",
              },
            ],
          },
        ],
      },
      "table": "InstallationVerificationInfo",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ivi",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1781,
        "pos": 1745,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1777,
            "pos": 1745,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1748,
                "pos": 1745,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1777,
                "pos": 1749,
                "tag": "UnquotedIdentifier",
                "value": "InstallationVerificationInfo",
              },
            ],
          },
          Object {
            "nextPos": 1781,
            "pos": 1778,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1781,
                "pos": 1778,
                "tag": "UnquotedIdentifier",
                "value": "ivi",
              },
            ],
          },
        ],
      },
      "table": "InstallationVerificationInfo",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2210,
        "pos": 2186,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2207,
            "pos": 2186,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2189,
                "pos": 2186,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2207,
                "pos": 2190,
                "tag": "UnquotedIdentifier",
                "value": "InstallationMeter",
              },
            ],
          },
          Object {
            "nextPos": 2210,
            "pos": 2208,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2210,
                "pos": 2208,
                "tag": "UnquotedIdentifier",
                "value": "im",
              },
            ],
          },
        ],
      },
      "table": "InstallationMeter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2231,
        "pos": 2220,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2229,
            "pos": 2220,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2223,
                "pos": 2220,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2229,
                "pos": 2224,
                "tag": "UnquotedIdentifier",
                "value": "Meter",
              },
            ],
          },
          Object {
            "nextPos": 2231,
            "pos": 2230,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2231,
                "pos": 2230,
                "tag": "UnquotedIdentifier",
                "value": "m",
              },
            ],
          },
        ],
      },
      "table": "Meter",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mt",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2287,
        "pos": 2271,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2284,
            "pos": 2271,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2274,
                "pos": 2271,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2284,
                "pos": 2275,
                "tag": "UnquotedIdentifier",
                "value": "MeterType",
              },
            ],
          },
          Object {
            "nextPos": 2287,
            "pos": 2285,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2287,
                "pos": 2285,
                "tag": "UnquotedIdentifier",
                "value": "mt",
              },
            ],
          },
        ],
      },
      "table": "MeterType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "s",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2507,
        "pos": 2495,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2505,
            "pos": 2495,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2498,
                "pos": 2495,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2505,
                "pos": 2499,
                "tag": "UnquotedIdentifier",
                "value": "Switch",
              },
            ],
          },
          Object {
            "nextPos": 2507,
            "pos": 2506,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2507,
                "pos": 2506,
                "tag": "UnquotedIdentifier",
                "value": "s",
              },
            ],
          },
        ],
      },
      "table": "Switch",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "s",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2684,
        "pos": 2672,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2682,
            "pos": 2672,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2675,
                "pos": 2672,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2682,
                "pos": 2676,
                "tag": "UnquotedIdentifier",
                "value": "Switch",
              },
            ],
          },
          Object {
            "nextPos": 2684,
            "pos": 2683,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2684,
                "pos": 2683,
                "tag": "UnquotedIdentifier",
                "value": "s",
              },
            ],
          },
        ],
      },
      "table": "Switch",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "s",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 2871,
        "pos": 2859,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 2869,
            "pos": 2859,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 2862,
                "pos": 2859,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 2869,
                "pos": 2863,
                "tag": "UnquotedIdentifier",
                "value": "Switch",
              },
            ],
          },
          Object {
            "nextPos": 2871,
            "pos": 2870,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 2871,
                "pos": 2870,
                "tag": "UnquotedIdentifier",
                "value": "s",
              },
            ],
          },
        ],
      },
      "table": "Switch",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "i",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3087,
        "pos": 3069,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3085,
            "pos": 3069,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3072,
                "pos": 3069,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3085,
                "pos": 3073,
                "tag": "UnquotedIdentifier",
                "value": "Installation",
              },
            ],
          },
          Object {
            "nextPos": 3087,
            "pos": 3086,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3087,
                "pos": 3086,
                "tag": "UnquotedIdentifier",
                "value": "i",
              },
            ],
          },
        ],
      },
      "table": "Installation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "it",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3116,
        "pos": 3093,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3113,
            "pos": 3093,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3096,
                "pos": 3093,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3113,
                "pos": 3097,
                "tag": "UnquotedIdentifier",
                "value": "InstallationType",
              },
            ],
          },
          Object {
            "nextPos": 3116,
            "pos": 3114,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3116,
                "pos": 3114,
                "tag": "UnquotedIdentifier",
                "value": "it",
              },
            ],
          },
        ],
      },
      "table": "InstallationType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gtt",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3205,
        "pos": 3174,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3201,
            "pos": 3174,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3177,
                "pos": 3174,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3201,
                "pos": 3178,
                "tag": "UnquotedIdentifier",
                "value": "GeneratorTechnologyType",
              },
            ],
          },
          Object {
            "nextPos": 3205,
            "pos": 3202,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3205,
                "pos": 3202,
                "tag": "UnquotedIdentifier",
                "value": "gtt",
              },
            ],
          },
        ],
      },
      "table": "GeneratorTechnologyType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "pt",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3297,
        "pos": 3278,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3294,
            "pos": 3278,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3281,
                "pos": 3278,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3294,
                "pos": 3282,
                "tag": "UnquotedIdentifier",
                "value": "PropertyType",
              },
            ],
          },
          Object {
            "nextPos": 3297,
            "pos": 3295,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3297,
                "pos": 3295,
                "tag": "UnquotedIdentifier",
                "value": "pt",
              },
            ],
          },
        ],
      },
      "table": "PropertyType",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "gai",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3384,
        "pos": 3347,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3380,
            "pos": 3347,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3350,
                "pos": 3347,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3380,
                "pos": 3351,
                "tag": "UnquotedIdentifier",
                "value": "GenerationAccountInstallation",
              },
            ],
          },
          Object {
            "nextPos": 3384,
            "pos": 3381,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3384,
                "pos": 3381,
                "tag": "UnquotedIdentifier",
                "value": "gai",
              },
            ],
          },
        ],
      },
      "table": "GenerationAccountInstallation",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ga",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3459,
        "pos": 3435,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3456,
            "pos": 3435,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3438,
                "pos": 3435,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3456,
                "pos": 3439,
                "tag": "UnquotedIdentifier",
                "value": "GenerationAccount",
              },
            ],
          },
          Object {
            "nextPos": 3459,
            "pos": 3457,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3459,
                "pos": 3457,
                "tag": "UnquotedIdentifier",
                "value": "ga",
              },
            ],
          },
        ],
      },
      "table": "GenerationAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "ca",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3677,
        "pos": 3655,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3674,
            "pos": 3655,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3658,
                "pos": 3655,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3674,
                "pos": 3659,
                "tag": "UnquotedIdentifier",
                "value": "CustomerAccount",
              },
            ],
          },
          Object {
            "nextPos": 3677,
            "pos": 3675,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3677,
                "pos": 3675,
                "tag": "UnquotedIdentifier",
                "value": "ca",
              },
            ],
          },
        ],
      },
      "table": "CustomerAccount",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 3809,
        "pos": 3795,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 3807,
            "pos": 3795,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 3798,
                "pos": 3795,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 3807,
                "pos": 3799,
                "tag": "UnquotedIdentifier",
                "value": "Customer",
              },
            ],
          },
          Object {
            "nextPos": 3809,
            "pos": 3808,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 3809,
                "pos": 3808,
                "tag": "UnquotedIdentifier",
                "value": "c",
              },
            ],
          },
        ],
      },
      "table": "Customer",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql levelisations.list.query.sql: levelisations.list.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "q",
      "nextPos": 178,
      "pick": Array [],
      "pos": 176,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "",
        "type": "String",
      },
    },
    Object {
      "name": "q",
      "nextPos": 214,
      "pick": Array [],
      "pos": 212,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "quarter",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 209,
          "pos": 188,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 201,
              "pos": 188,
              "tag": "UnquotedIdentifier",
              "value": "levelisations",
            },
            Object {
              "nextPos": 209,
              "pos": 202,
              "tag": "UnquotedIdentifier",
              "value": "quarter",
            },
          ],
        },
        "table": "levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "ids",
      "nextPos": 307,
      "pick": Array [],
      "pos": 303,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "name": "int4",
          "type": "Named",
          "value": Object {
            "type": "Number",
          },
        },
        "type": "Array",
      },
    },
    Object {
      "name": "sortField",
      "nextPos": 437,
      "pick": Array [],
      "pos": 427,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "quarter",
        "type": "String",
      },
    },
    Object {
      "name": "sortOrder",
      "nextPos": 464,
      "pick": Array [],
      "pos": 454,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "DESC",
        "type": "String",
      },
    },
    Object {
      "name": "sortOrder",
      "nextPos": 548,
      "pick": Array [],
      "pos": 538,
      "required": false,
      "spread": false,
      "type": Object {
        "literal": "ASC",
        "type": "String",
      },
    },
    Object {
      "name": "limit",
      "nextPos": 609,
      "pick": Array [],
      "pos": 603,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
    Object {
      "name": "offset",
      "nextPos": 629,
      "pick": Array [],
      "pos": 622,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 29,
          "pos": 13,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 26,
              "pos": 13,
              "tag": "UnquotedIdentifier",
              "value": "levelisations",
            },
            Object {
              "nextPos": 29,
              "pos": 27,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "quarter",
      "type": Object {
        "column": "quarter",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 64,
          "pos": 43,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 56,
              "pos": 43,
              "tag": "UnquotedIdentifier",
              "value": "levelisations",
            },
            Object {
              "nextPos": 64,
              "pos": 57,
              "tag": "UnquotedIdentifier",
              "value": "quarter",
            },
          ],
        },
        "table": "levelisations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "startOn",
      "type": Object {
        "column": "start_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 91,
          "pos": 83,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 91,
              "pos": 83,
              "tag": "UnquotedIdentifier",
              "value": "start_on",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "endOn",
      "type": Object {
        "column": "end_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 116,
          "pos": 110,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 116,
              "pos": 110,
              "tag": "UnquotedIdentifier",
              "value": "end_on",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "levelisations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 148,
        "pos": 135,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 148,
            "pos": 135,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 148,
                "pos": 135,
                "tag": "UnquotedIdentifier",
                "value": "levelisations",
              },
            ],
          },
        ],
      },
      "table": "levelisations",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql meter-reads.sql: meter-reads.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "meter_reads",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 23,
        "pos": 12,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 23,
            "pos": 12,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 23,
                "pos": 12,
                "tag": "UnquotedIdentifier",
                "value": "meter_reads",
              },
            ],
          },
        ],
      },
      "table": "meter_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "meters",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 214,
        "pos": 208,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 214,
            "pos": 208,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 214,
                "pos": 208,
                "tag": "UnquotedIdentifier",
                "value": "meters",
              },
            ],
          },
        ],
      },
      "table": "meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "mr",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1158,
        "pos": 1139,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1155,
            "pos": 1139,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1142,
                "pos": 1139,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1155,
                "pos": 1143,
                "tag": "UnquotedIdentifier",
                "value": "MeterReading",
              },
            ],
          },
          Object {
            "nextPos": 1158,
            "pos": 1156,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1158,
                "pos": 1156,
                "tag": "UnquotedIdentifier",
                "value": "mr",
              },
            ],
          },
        ],
      },
      "table": "MeterReading",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": "fit",
      "sourceTag": Object {
        "nextPos": 1175,
        "pos": 1164,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 1173,
            "pos": 1164,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 1167,
                "pos": 1164,
                "tag": "UnquotedIdentifier",
                "value": "fit",
              },
              Object {
                "nextPos": 1173,
                "pos": 1168,
                "tag": "UnquotedIdentifier",
                "value": "Meter",
              },
            ],
          },
          Object {
            "nextPos": 1175,
            "pos": 1174,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 1175,
                "pos": 1174,
                "tag": "UnquotedIdentifier",
                "value": "m",
              },
            ],
          },
        ],
      },
      "table": "Meter",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql process-batch.query.sql: process-batch.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "fitIds",
      "nextPos": 797,
      "pick": Array [],
      "pos": 790,
      "required": false,
      "spread": false,
      "type": Object {
        "items": Object {
          "column": "legacy_fit_db_id",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 783,
            "pos": 753,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 766,
                "pos": 753,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
              Object {
                "nextPos": 783,
                "pos": 767,
                "tag": "UnquotedIdentifier",
                "value": "legacy_fit_db_id",
              },
            ],
          },
          "table": "installations",
          "type": "LoadColumn",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "cfrFiTId",
      "type": Object {
        "column": "legacy_fit_db_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 39,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 22,
              "pos": 9,
              "tag": "UnquotedIdentifier",
              "value": "installations",
            },
            Object {
              "nextPos": 39,
              "pos": 23,
              "tag": "UnquotedIdentifier",
              "value": "legacy_fit_db_id",
            },
          ],
        },
        "table": "installations",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "email",
      "type": Object {
        "column": "email",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 71,
          "pos": 57,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 65,
              "pos": 57,
              "tag": "UnquotedIdentifier",
              "value": "contacts",
            },
            Object {
              "nextPos": 71,
              "pos": 66,
              "tag": "UnquotedIdentifier",
              "value": "email",
            },
          ],
        },
        "table": "contacts",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "contactName",
      "type": Object {
        "args": Array [
          Object {
            "column": "first_name",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 112,
              "pos": 93,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 101,
                  "pos": 93,
                  "tag": "UnquotedIdentifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 112,
                  "pos": 102,
                  "tag": "UnquotedIdentifier",
                  "value": "first_name",
                },
              ],
            },
            "table": "contacts",
            "type": "LoadColumn",
          },
          Object {
            "literal": " ",
            "type": "String",
          },
          Object {
            "column": "last_name",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 136,
              "pos": 118,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 126,
                  "pos": 118,
                  "tag": "UnquotedIdentifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 136,
                  "pos": 127,
                  "tag": "UnquotedIdentifier",
                  "value": "last_name",
                },
              ],
            },
            "table": "contacts",
            "type": "LoadColumn",
          },
        ],
        "name": "concat",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 137,
          "pos": 86,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 92,
              "pos": 86,
              "tag": "QualifiedIdentifier",
              "values": Array [
                Object {
                  "nextPos": 92,
                  "pos": 86,
                  "tag": "UnquotedIdentifier",
                  "value": "CONCAT",
                },
              ],
            },
            Object {
              "nextPos": 112,
              "pos": 93,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 101,
                  "pos": 93,
                  "tag": "UnquotedIdentifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 112,
                  "pos": 102,
                  "tag": "UnquotedIdentifier",
                  "value": "first_name",
                },
              ],
            },
            Object {
              "nextPos": 116,
              "pos": 113,
              "tag": "String",
              "value": " ",
            },
            Object {
              "nextPos": 136,
              "pos": 118,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 126,
                  "pos": 118,
                  "tag": "UnquotedIdentifier",
                  "value": "contacts",
                },
                Object {
                  "nextPos": 136,
                  "pos": 127,
                  "tag": "UnquotedIdentifier",
                  "value": "last_name",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "company",
      "type": Object {
        "column": "company_name",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 180,
          "pos": 158,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 167,
              "pos": 158,
              "tag": "UnquotedIdentifier",
              "value": "customers",
            },
            Object {
              "nextPos": 180,
              "pos": 168,
              "tag": "UnquotedIdentifier",
              "value": "company_name",
            },
          ],
        },
        "table": "customers",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "line1",
      "type": Object {
        "column": "address_line_1",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 221,
          "pos": 197,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 206,
              "pos": 197,
              "tag": "UnquotedIdentifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 221,
              "pos": 207,
              "tag": "UnquotedIdentifier",
              "value": "address_line_1",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "line2",
      "type": Object {
        "args": Array [
          Object {
            "column": "address_line_2",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 267,
              "pos": 243,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 252,
                  "pos": 243,
                  "tag": "UnquotedIdentifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 267,
                  "pos": 253,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_2",
                },
              ],
            },
            "table": "addresses",
            "type": "LoadColumn",
          },
          Object {
            "literal": " ",
            "type": "String",
          },
          Object {
            "column": "address_line_3",
            "schema": undefined,
            "sourceTag": Object {
              "nextPos": 298,
              "pos": 274,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 283,
                  "pos": 274,
                  "tag": "UnquotedIdentifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 298,
                  "pos": 284,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_3",
                },
              ],
            },
            "table": "addresses",
            "type": "LoadColumn",
          },
        ],
        "name": "concat",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 299,
          "pos": 236,
          "tag": "Function",
          "values": Array [
            Object {
              "nextPos": 242,
              "pos": 236,
              "tag": "QualifiedIdentifier",
              "values": Array [
                Object {
                  "nextPos": 242,
                  "pos": 236,
                  "tag": "UnquotedIdentifier",
                  "value": "CONCAT",
                },
              ],
            },
            Object {
              "nextPos": 267,
              "pos": 243,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 252,
                  "pos": 243,
                  "tag": "UnquotedIdentifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 267,
                  "pos": 253,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_2",
                },
              ],
            },
            Object {
              "nextPos": 272,
              "pos": 269,
              "tag": "String",
              "value": " ",
            },
            Object {
              "nextPos": 298,
              "pos": 274,
              "tag": "Column",
              "values": Array [
                Object {
                  "nextPos": 283,
                  "pos": 274,
                  "tag": "UnquotedIdentifier",
                  "value": "addresses",
                },
                Object {
                  "nextPos": 298,
                  "pos": 284,
                  "tag": "UnquotedIdentifier",
                  "value": "address_line_3",
                },
              ],
            },
          ],
        },
        "type": "LoadFunction",
      },
    },
    Object {
      "name": "town",
      "type": Object {
        "column": "city",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 328,
          "pos": 314,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 323,
              "pos": 314,
              "tag": "UnquotedIdentifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 328,
              "pos": 324,
              "tag": "UnquotedIdentifier",
              "value": "city",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "postcode",
      "type": Object {
        "column": "postcode",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 360,
          "pos": 342,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 351,
              "pos": 342,
              "tag": "UnquotedIdentifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 360,
              "pos": 352,
              "tag": "UnquotedIdentifier",
              "value": "postcode",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "county",
      "type": Object {
        "column": "county",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 394,
          "pos": 378,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 387,
              "pos": 378,
              "tag": "UnquotedIdentifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 394,
              "pos": 388,
              "tag": "UnquotedIdentifier",
              "value": "county",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "country",
      "type": Object {
        "column": "country",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 427,
          "pos": 410,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 419,
              "pos": 410,
              "tag": "UnquotedIdentifier",
              "value": "addresses",
            },
            Object {
              "nextPos": 427,
              "pos": 420,
              "tag": "UnquotedIdentifier",
              "value": "country",
            },
          ],
        },
        "table": "addresses",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "installations",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 459,
        "pos": 446,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 459,
            "pos": 446,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 459,
                "pos": 446,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contracts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 474,
        "pos": 465,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 474,
            "pos": 465,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 474,
                "pos": 465,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "accounts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 536,
        "pos": 528,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 536,
            "pos": 528,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 536,
                "pos": 528,
                "tag": "UnquotedIdentifier",
                "value": "accounts",
              },
            ],
          },
        ],
      },
      "table": "accounts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "customers",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 589,
        "pos": 580,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 589,
            "pos": 580,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 589,
                "pos": 580,
                "tag": "UnquotedIdentifier",
                "value": "customers",
              },
            ],
          },
        ],
      },
      "table": "customers",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "contacts",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 642,
        "pos": 634,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 642,
            "pos": 634,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 642,
                "pos": 634,
                "tag": "UnquotedIdentifier",
                "value": "contacts",
              },
            ],
          },
        ],
      },
      "table": "contacts",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "addresses",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 708,
        "pos": 699,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 708,
            "pos": 699,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 708,
                "pos": 699,
                "tag": "UnquotedIdentifier",
                "value": "addresses",
              },
            ],
          },
        ],
      },
      "table": "addresses",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql rates-by-tarrif-ids.query.sql: rates-by-tarrif-ids.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "ids",
      "nextPos": 319,
      "pick": Array [],
      "pos": 314,
      "required": false,
      "spread": true,
      "type": Object {
        "items": Object {
          "column": "id",
          "schema": undefined,
          "sourceTag": Object {
            "nextPos": 310,
            "pos": 306,
            "tag": "Column",
            "values": Array [
              Object {
                "nextPos": 307,
                "pos": 306,
                "tag": "UnquotedIdentifier",
                "value": "t",
              },
              Object {
                "nextPos": 310,
                "pos": 308,
                "tag": "UnquotedIdentifier",
                "value": "id",
              },
            ],
          },
          "table": "t",
          "type": "LoadColumn",
        },
        "type": "Array",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "tariffId",
      "type": Object {
        "column": "tariff_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 20,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 10,
              "pos": 9,
              "tag": "UnquotedIdentifier",
              "value": "r",
            },
            Object {
              "nextPos": 20,
              "pos": 11,
              "tag": "UnquotedIdentifier",
              "value": "tariff_id",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "rate",
      "type": Object {
        "column": "rate",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 44,
          "pos": 38,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 39,
              "pos": 38,
              "tag": "UnquotedIdentifier",
              "value": "r",
            },
            Object {
              "nextPos": 44,
              "pos": 40,
              "tag": "UnquotedIdentifier",
              "value": "rate",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "startOn",
      "type": Object {
        "column": "start_date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 63,
          "pos": 48,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 49,
              "pos": 48,
              "tag": "UnquotedIdentifier",
              "value": "r",
            },
            Object {
              "nextPos": 63,
              "pos": 50,
              "tag": "UnquotedIdentifier",
              "value": "start_date_on",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "tariffCode",
      "type": Object {
        "column": "code",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 86,
          "pos": 80,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 81,
              "pos": 80,
              "tag": "UnquotedIdentifier",
              "value": "t",
            },
            Object {
              "nextPos": 86,
              "pos": 82,
              "tag": "UnquotedIdentifier",
              "value": "code",
            },
          ],
        },
        "table": "t",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "tariffType",
      "type": Object {
        "column": "type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 112,
          "pos": 106,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 107,
              "pos": 106,
              "tag": "UnquotedIdentifier",
              "value": "t",
            },
            Object {
              "nextPos": 112,
              "pos": 108,
              "tag": "UnquotedIdentifier",
              "value": "type",
            },
          ],
        },
        "table": "t",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "endOn",
      "type": Object {
        "column": "end_date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 145,
          "pos": 132,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 133,
              "pos": 132,
              "tag": "UnquotedIdentifier",
              "value": "r",
            },
            Object {
              "nextPos": 145,
              "pos": 134,
              "tag": "UnquotedIdentifier",
              "value": "end_date_on",
            },
          ],
        },
        "table": "r",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "r",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 176,
        "pos": 162,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 174,
            "pos": 162,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 174,
                "pos": 162,
                "tag": "UnquotedIdentifier",
                "value": "tariff_rates",
              },
            ],
          },
          Object {
            "nextPos": 176,
            "pos": 175,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 176,
                "pos": 175,
                "tag": "UnquotedIdentifier",
                "value": "r",
              },
            ],
          },
        ],
      },
      "table": "tariff_rates",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "t",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 196,
        "pos": 187,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 194,
            "pos": 187,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 194,
                "pos": 187,
                "tag": "UnquotedIdentifier",
                "value": "tariffs",
              },
            ],
          },
          Object {
            "nextPos": 196,
            "pos": 195,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 196,
                "pos": 195,
                "tag": "UnquotedIdentifier",
                "value": "t",
              },
            ],
          },
        ],
      },
      "table": "tariffs",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql read-create.query.sql: read-create.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "meterId",
      "nextPos": 100,
      "pick": Array [],
      "pos": 92,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "nextPos": 24,
              "pos": 13,
              "tag": "Table",
              "values": Array [
                Object {
                  "nextPos": 24,
                  "pos": 13,
                  "tag": "QualifiedIdentifier",
                  "values": Array [
                    Object {
                      "nextPos": 24,
                      "pos": 13,
                      "tag": "UnquotedIdentifier",
                      "value": "meter_reads",
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "UnquotedIdentifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "UnquotedIdentifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "QuotedIdentifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "UnquotedIdentifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "UnquotedIdentifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "QuotedIdentifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 126,
                          "pos": 118,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 126,
                              "pos": 118,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 148,
                                  "pos": 136,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 159,
                          "pos": 151,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 159,
                              "pos": 151,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 186,
                                  "pos": 174,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 197,
                          "pos": 189,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 197,
                              "pos": 189,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "pos": 206,
                              "tag": "Type",
                              "values": Array [
                                Object {
                                  "nextPos": 209,
                                  "pos": 206,
                                  "tag": "QualifiedIdentifier",
                                  "values": Array [
                                    Object {
                                      "nextPos": 209,
                                      "pos": 206,
                                      "tag": "UnquotedIdentifier",
                                      "value": "int",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "QuotedIdentifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "UnquotedIdentifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "QuotedIdentifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "UnquotedIdentifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "QuotedIdentifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "reason",
      "nextPos": 109,
      "pick": Array [],
      "pos": 102,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "reason",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "nextPos": 24,
              "pos": 13,
              "tag": "Table",
              "values": Array [
                Object {
                  "nextPos": 24,
                  "pos": 13,
                  "tag": "QualifiedIdentifier",
                  "values": Array [
                    Object {
                      "nextPos": 24,
                      "pos": 13,
                      "tag": "UnquotedIdentifier",
                      "value": "meter_reads",
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "UnquotedIdentifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "UnquotedIdentifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "QuotedIdentifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "UnquotedIdentifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "UnquotedIdentifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "QuotedIdentifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 126,
                          "pos": 118,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 126,
                              "pos": 118,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 148,
                                  "pos": 136,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 159,
                          "pos": 151,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 159,
                              "pos": 151,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 186,
                                  "pos": 174,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 197,
                          "pos": 189,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 197,
                              "pos": 189,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "pos": 206,
                              "tag": "Type",
                              "values": Array [
                                Object {
                                  "nextPos": 209,
                                  "pos": 206,
                                  "tag": "QualifiedIdentifier",
                                  "values": Array [
                                    Object {
                                      "nextPos": 209,
                                      "pos": 206,
                                      "tag": "UnquotedIdentifier",
                                      "value": "int",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "QuotedIdentifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "UnquotedIdentifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "QuotedIdentifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "UnquotedIdentifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "QuotedIdentifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "type",
      "nextPos": 116,
      "pick": Array [],
      "pos": 111,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "nextPos": 24,
              "pos": 13,
              "tag": "Table",
              "values": Array [
                Object {
                  "nextPos": 24,
                  "pos": 13,
                  "tag": "QualifiedIdentifier",
                  "values": Array [
                    Object {
                      "nextPos": 24,
                      "pos": 13,
                      "tag": "UnquotedIdentifier",
                      "value": "meter_reads",
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "UnquotedIdentifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "UnquotedIdentifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "QuotedIdentifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "UnquotedIdentifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "UnquotedIdentifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "QuotedIdentifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 126,
                          "pos": 118,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 126,
                              "pos": 118,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 148,
                                  "pos": 136,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 159,
                          "pos": 151,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 159,
                              "pos": 151,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 186,
                                  "pos": 174,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 197,
                          "pos": 189,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 197,
                              "pos": 189,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "pos": 206,
                              "tag": "Type",
                              "values": Array [
                                Object {
                                  "nextPos": 209,
                                  "pos": 206,
                                  "tag": "QualifiedIdentifier",
                                  "values": Array [
                                    Object {
                                      "nextPos": 209,
                                      "pos": 206,
                                      "tag": "UnquotedIdentifier",
                                      "value": "int",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "QuotedIdentifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "UnquotedIdentifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "QuotedIdentifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "UnquotedIdentifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "QuotedIdentifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "dateOn",
      "nextPos": 134,
      "pick": Array [],
      "pos": 127,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "nextPos": 24,
              "pos": 13,
              "tag": "Table",
              "values": Array [
                Object {
                  "nextPos": 24,
                  "pos": 13,
                  "tag": "QualifiedIdentifier",
                  "values": Array [
                    Object {
                      "nextPos": 24,
                      "pos": 13,
                      "tag": "UnquotedIdentifier",
                      "value": "meter_reads",
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "UnquotedIdentifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "UnquotedIdentifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "QuotedIdentifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "UnquotedIdentifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "UnquotedIdentifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "QuotedIdentifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 126,
                          "pos": 118,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 126,
                              "pos": 118,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 148,
                                  "pos": 136,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 159,
                          "pos": 151,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 159,
                              "pos": 151,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 186,
                                  "pos": 174,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 197,
                          "pos": 189,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 197,
                              "pos": 189,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "pos": 206,
                              "tag": "Type",
                              "values": Array [
                                Object {
                                  "nextPos": 209,
                                  "pos": 206,
                                  "tag": "QualifiedIdentifier",
                                  "values": Array [
                                    Object {
                                      "nextPos": 209,
                                      "pos": 206,
                                      "tag": "UnquotedIdentifier",
                                      "value": "int",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "QuotedIdentifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "UnquotedIdentifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "QuotedIdentifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "UnquotedIdentifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "QuotedIdentifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "submittedAt",
      "nextPos": 172,
      "pick": Array [],
      "pos": 160,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "submitted_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 298,
          "pos": 0,
          "tag": "Insert",
          "values": Array [
            Object {
              "nextPos": 24,
              "pos": 13,
              "tag": "Table",
              "values": Array [
                Object {
                  "nextPos": 24,
                  "pos": 13,
                  "tag": "QualifiedIdentifier",
                  "values": Array [
                    Object {
                      "nextPos": 24,
                      "pos": 13,
                      "tag": "UnquotedIdentifier",
                      "value": "meter_reads",
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 83,
              "pos": 25,
              "tag": "Columns",
              "values": Array [
                Object {
                  "nextPos": 34,
                  "pos": 26,
                  "tag": "UnquotedIdentifier",
                  "value": "meter_id",
                },
                Object {
                  "nextPos": 42,
                  "pos": 36,
                  "tag": "UnquotedIdentifier",
                  "value": "reason",
                },
                Object {
                  "nextPos": 50,
                  "pos": 44,
                  "tag": "QuotedIdentifier",
                  "value": "type",
                },
                Object {
                  "nextPos": 59,
                  "pos": 52,
                  "tag": "UnquotedIdentifier",
                  "value": "date_on",
                },
                Object {
                  "nextPos": 73,
                  "pos": 61,
                  "tag": "UnquotedIdentifier",
                  "value": "submitted_at",
                },
                Object {
                  "nextPos": 82,
                  "pos": 75,
                  "tag": "QuotedIdentifier",
                  "value": "value",
                },
              ],
            },
            Object {
              "nextPos": 214,
              "pos": 85,
              "tag": "ValuesList",
              "values": Array [
                Object {
                  "nextPos": 214,
                  "pos": 91,
                  "tag": "Values",
                  "values": Array [
                    Object {
                      "nextPos": 100,
                      "pick": Array [],
                      "pos": 92,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "meterId",
                    },
                    Object {
                      "nextPos": 109,
                      "pick": Array [],
                      "pos": 102,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "reason",
                    },
                    Object {
                      "nextPos": 116,
                      "pick": Array [],
                      "pos": 111,
                      "required": false,
                      "tag": "Parameter",
                      "type": "single",
                      "value": "type",
                    },
                    Object {
                      "nextPos": 149,
                      "pos": 118,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 126,
                          "pos": 118,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 126,
                              "pos": 118,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 134,
                          "pick": Array [],
                          "pos": 127,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "dateOn",
                        },
                        Object {
                          "nextPos": 148,
                          "pos": 136,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 148,
                              "pos": 136,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 148,
                                  "pos": 136,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 187,
                      "pos": 151,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 159,
                          "pos": 151,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 159,
                              "pos": 151,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 172,
                          "pick": Array [],
                          "pos": 160,
                          "required": false,
                          "tag": "Parameter",
                          "type": "single",
                          "value": "submittedAt",
                        },
                        Object {
                          "nextPos": 186,
                          "pos": 174,
                          "tag": "Function",
                          "values": Array [
                            Object {
                              "nextPos": 186,
                              "pos": 174,
                              "tag": "QualifiedIdentifier",
                              "values": Array [
                                Object {
                                  "nextPos": 186,
                                  "pos": 174,
                                  "tag": "UnquotedIdentifier",
                                  "value": "CURRENT_DATE",
                                },
                              ],
                            },
                          ],
                        },
                      ],
                    },
                    Object {
                      "nextPos": 213,
                      "pos": 189,
                      "tag": "Function",
                      "values": Array [
                        Object {
                          "nextPos": 197,
                          "pos": 189,
                          "tag": "QualifiedIdentifier",
                          "values": Array [
                            Object {
                              "nextPos": 197,
                              "pos": 189,
                              "tag": "UnquotedIdentifier",
                              "value": "COALESCE",
                            },
                          ],
                        },
                        Object {
                          "nextPos": 209,
                          "pos": 198,
                          "tag": "PgCast",
                          "values": Array [
                            Object {
                              "nextPos": 204,
                              "pick": Array [],
                              "pos": 198,
                              "required": false,
                              "tag": "Parameter",
                              "type": "single",
                              "value": "value",
                            },
                            Object {
                              "nextPos": 209,
                              "pos": 206,
                              "tag": "Type",
                              "values": Array [
                                Object {
                                  "nextPos": 209,
                                  "pos": 206,
                                  "tag": "QualifiedIdentifier",
                                  "values": Array [
                                    Object {
                                      "nextPos": 209,
                                      "pos": 206,
                                      "tag": "UnquotedIdentifier",
                                      "value": "int",
                                    },
                                  ],
                                },
                              ],
                            },
                          ],
                        },
                        Object {
                          "nextPos": 212,
                          "pos": 211,
                          "tag": "Number",
                          "value": "0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "nextPos": 298,
              "pos": 215,
              "tag": "Returning",
              "values": Array [
                Object {
                  "nextPos": 229,
                  "pos": 227,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 229,
                      "pos": 227,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 229,
                          "pos": 227,
                          "tag": "UnquotedIdentifier",
                          "value": "id",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 240,
                  "pos": 233,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 240,
                      "pos": 233,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 240,
                          "pos": 233,
                          "tag": "QuotedIdentifier",
                          "value": "value",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 265,
                  "pos": 244,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 252,
                      "pos": 244,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 252,
                          "pos": 244,
                          "tag": "UnquotedIdentifier",
                          "value": "meter_id",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 265,
                      "pos": 253,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 265,
                          "pos": 256,
                          "tag": "QuotedIdentifier",
                          "value": "meterId",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "nextPos": 298,
                  "pos": 269,
                  "tag": "ReturningListItem",
                  "values": Array [
                    Object {
                      "nextPos": 281,
                      "pos": 269,
                      "tag": "Column",
                      "values": Array [
                        Object {
                          "nextPos": 281,
                          "pos": 269,
                          "tag": "UnquotedIdentifier",
                          "value": "submitted_at",
                        },
                      ],
                    },
                    Object {
                      "nextPos": 298,
                      "pos": 282,
                      "tag": "As",
                      "values": Array [
                        Object {
                          "nextPos": 298,
                          "pos": 285,
                          "tag": "QuotedIdentifier",
                          "value": "submittedAt",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "nextPos": 204,
      "pick": Array [],
      "pos": 198,
      "required": false,
      "spread": false,
      "type": Object {
        "name": "int4",
        "type": "Named",
        "value": Object {
          "type": "Number",
        },
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 229,
          "pos": 227,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 229,
              "pos": 227,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "type": Object {
        "column": "value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 240,
          "pos": 233,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 240,
              "pos": 233,
              "tag": "QuotedIdentifier",
              "value": "value",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "meterId",
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 252,
          "pos": 244,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 252,
              "pos": 244,
              "tag": "UnquotedIdentifier",
              "value": "meter_id",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "submittedAt",
      "type": Object {
        "column": "submitted_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 281,
          "pos": 269,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 281,
              "pos": 269,
              "tag": "UnquotedIdentifier",
              "value": "submitted_at",
            },
          ],
        },
        "table": "meter_reads",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "meter_reads",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 24,
        "pos": 13,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 24,
            "pos": 13,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 24,
                "pos": 13,
                "tag": "UnquotedIdentifier",
                "value": "meter_reads",
              },
            ],
          },
        ],
      },
      "table": "meter_reads",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql reads-by-account-id.query.sql: reads-by-account-id.query.sql 1`] = `
Object {
  "params": Array [
    Object {
      "name": "id",
      "nextPos": 596,
      "pick": Array [],
      "pos": 593,
      "required": false,
      "spread": false,
      "type": Object {
        "column": "account_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 590,
          "pos": 578,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 579,
              "pos": 578,
              "tag": "UnquotedIdentifier",
              "value": "c",
            },
            Object {
              "nextPos": 590,
              "pos": 580,
              "tag": "UnquotedIdentifier",
              "value": "account_id",
            },
          ],
        },
        "table": "c",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "offset",
      "nextPos": 631,
      "pick": Array [],
      "pos": 624,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
    Object {
      "name": "perPage",
      "nextPos": 646,
      "pick": Array [],
      "pos": 638,
      "required": false,
      "spread": false,
      "type": Object {
        "type": "String",
      },
    },
  ],
  "results": Array [
    Object {
      "name": "id",
      "type": Object {
        "column": "id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 14,
          "pos": 9,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 11,
              "pos": 9,
              "tag": "UnquotedIdentifier",
              "value": "mr",
            },
            Object {
              "nextPos": 14,
              "pos": 12,
              "tag": "UnquotedIdentifier",
              "value": "id",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "msn",
      "type": Object {
        "column": "serial_number",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 33,
          "pos": 18,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 19,
              "pos": 18,
              "tag": "UnquotedIdentifier",
              "value": "m",
            },
            Object {
              "nextPos": 33,
              "pos": 20,
              "tag": "UnquotedIdentifier",
              "value": "serial_number",
            },
          ],
        },
        "table": "m",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "meterId",
      "type": Object {
        "column": "meter_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 57,
          "pos": 46,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 48,
              "pos": 46,
              "tag": "UnquotedIdentifier",
              "value": "mr",
            },
            Object {
              "nextPos": 57,
              "pos": 49,
              "tag": "UnquotedIdentifier",
              "value": "meter_id",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "dateOn",
      "type": Object {
        "column": "date_on",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 81,
          "pos": 74,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 81,
              "pos": 74,
              "tag": "UnquotedIdentifier",
              "value": "date_on",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "value",
      "type": Object {
        "column": "value",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 102,
          "pos": 97,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 102,
              "pos": 97,
              "tag": "UnquotedIdentifier",
              "value": "value",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "type",
      "type": Object {
        "column": "type",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 113,
          "pos": 106,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 108,
              "pos": 106,
              "tag": "UnquotedIdentifier",
              "value": "mr",
            },
            Object {
              "nextPos": 113,
              "pos": 109,
              "tag": "UnquotedIdentifier",
              "value": "type",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "reason",
      "type": Object {
        "column": "reason",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 123,
          "pos": 117,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 123,
              "pos": 117,
              "tag": "UnquotedIdentifier",
              "value": "reason",
            },
          ],
        },
        "table": undefined,
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "createdAt",
      "type": Object {
        "column": "created_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 140,
          "pos": 127,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 129,
              "pos": 127,
              "tag": "UnquotedIdentifier",
              "value": "mr",
            },
            Object {
              "nextPos": 140,
              "pos": 130,
              "tag": "UnquotedIdentifier",
              "value": "created_at",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "updatedAt",
      "type": Object {
        "column": "updated_at",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 172,
          "pos": 159,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 161,
              "pos": 159,
              "tag": "UnquotedIdentifier",
              "value": "mr",
            },
            Object {
              "nextPos": 172,
              "pos": 162,
              "tag": "UnquotedIdentifier",
              "value": "updated_at",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "sourceSystemId",
      "type": Object {
        "column": "source_system_id",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 210,
          "pos": 191,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 193,
              "pos": 191,
              "tag": "UnquotedIdentifier",
              "value": "mr",
            },
            Object {
              "nextPos": 210,
              "pos": 194,
              "tag": "UnquotedIdentifier",
              "value": "source_system_id",
            },
          ],
        },
        "table": "mr",
        "type": "LoadColumn",
      },
    },
    Object {
      "name": "mpan",
      "type": Object {
        "column": "mpan",
        "schema": undefined,
        "sourceTag": Object {
          "nextPos": 240,
          "pos": 234,
          "tag": "Column",
          "values": Array [
            Object {
              "nextPos": 235,
              "pos": 234,
              "tag": "UnquotedIdentifier",
              "value": "m",
            },
            Object {
              "nextPos": 240,
              "pos": 236,
              "tag": "UnquotedIdentifier",
              "value": "mpan",
            },
          ],
        },
        "table": "m",
        "type": "LoadColumn",
      },
    },
  ],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "mr",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 260,
        "pos": 246,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 257,
            "pos": 246,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 257,
                "pos": 246,
                "tag": "UnquotedIdentifier",
                "value": "meter_reads",
              },
            ],
          },
          Object {
            "nextPos": 260,
            "pos": 258,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 260,
                "pos": 258,
                "tag": "UnquotedIdentifier",
                "value": "mr",
              },
            ],
          },
        ],
      },
      "table": "meter_reads",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "m",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 286,
        "pos": 278,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 284,
            "pos": 278,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 284,
                "pos": 278,
                "tag": "UnquotedIdentifier",
                "value": "meters",
              },
            ],
          },
          Object {
            "nextPos": 286,
            "pos": 285,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 286,
                "pos": 285,
                "tag": "UnquotedIdentifier",
                "value": "m",
              },
            ],
          },
        ],
      },
      "table": "meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "im",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 365,
        "pos": 343,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 362,
            "pos": 343,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 362,
                "pos": 343,
                "tag": "UnquotedIdentifier",
                "value": "installation_meters",
              },
            ],
          },
          Object {
            "nextPos": 365,
            "pos": 363,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 365,
                "pos": 363,
                "tag": "UnquotedIdentifier",
                "value": "im",
              },
            ],
          },
        ],
      },
      "table": "installation_meters",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "i",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 438,
        "pos": 423,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 436,
            "pos": 423,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 436,
                "pos": 423,
                "tag": "UnquotedIdentifier",
                "value": "installations",
              },
            ],
          },
          Object {
            "nextPos": 438,
            "pos": 437,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 438,
                "pos": 437,
                "tag": "UnquotedIdentifier",
                "value": "i",
              },
            ],
          },
        ],
      },
      "table": "installations",
      "type": "Table",
    },
    Object {
      "isResult": true,
      "name": "c",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 513,
        "pos": 502,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 511,
            "pos": 502,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 511,
                "pos": 502,
                "tag": "UnquotedIdentifier",
                "value": "contracts",
              },
            ],
          },
          Object {
            "nextPos": 513,
            "pos": 512,
            "tag": "As",
            "values": Array [
              Object {
                "nextPos": 513,
                "pos": 512,
                "tag": "UnquotedIdentifier",
                "value": "c",
              },
            ],
          },
        ],
      },
      "table": "contracts",
      "type": "Table",
    },
  ],
}
`;

exports[`Query Interface Should convert complex sql tariff-rates.sql: tariff-rates.sql 1`] = `
Object {
  "params": Array [],
  "results": Array [],
  "sources": Array [
    Object {
      "isResult": true,
      "name": "tariffs",
      "schema": undefined,
      "sourceTag": Object {
        "nextPos": 19,
        "pos": 12,
        "tag": "Table",
        "values": Array [
          Object {
            "nextPos": 19,
            "pos": 12,
            "tag": "QualifiedIdentifier",
            "values": Array [
              Object {
                "nextPos": 19,
                "pos": 12,
                "tag": "UnquotedIdentifier",
                "value": "tariffs",
              },
            ],
          },
        ],
      },
      "table": "tariffs",
      "type": "Table",
    },
  ],
}
`;
